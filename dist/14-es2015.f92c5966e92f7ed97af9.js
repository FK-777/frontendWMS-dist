(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{XBNL:function(e,t,c){"use strict";c.d(t,"a",function(){return r});var i=c("f8oD"),s=c("gQwx"),n=c("8Y7J");let r=(()=>{class e{constructor(e){this.http=e,this.attendanceUrl=s.a.mainApiUrl()+"/attendance"}getAttendance(e){return this.http.get(this.attendanceUrl+i.a.objToQuery(e))}createAttendance(e){return console.log("Create!"),console.log(e),console.log(this.attendanceUrl),this.http.post(this.attendanceUrl,e)}updateAttendance(e,t){return this.http.patch(this.attendanceUrl+"/"+e,t)}deleteAttendance(e){return this.http.delete(this.attendanceUrl+"/"+e)}}return e.\u0275fac=function(t){return new(t||e)(n.jc(i.a))},e.\u0275prov=n.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},f4AX:function(e,t,c){"use strict";c.d(t,"a",function(){return r});var i=c("f8oD"),s=c("gQwx"),n=c("8Y7J");let r=(()=>{class e{constructor(e){this.http=e,this.userUrl=s.a.mainApiUrl()+"/user"}getUsers(e){return console.log(e),this.http.get(this.userUrl+i.a.objToQuery(e))}createUsers(e){return this.http.post(this.userUrl,e)}updateUsers(e,t){return this.http.patch(this.userUrl+"/"+e,t)}updateUser(e,t){return this.http.patch(this.userUrl+"/"+e,t)}deleteUsers(e){return this.http.delete(this.userUrl+"/"+e)}}return e.\u0275fac=function(t){return new(t||e)(n.jc(i.a))},e.\u0275prov=n.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},yz2Z:function(e,t,c){"use strict";c.r(t),c.d(t,"AttendenceApprovalModule",function(){return y});var i=c("SVse"),s=c("iInd"),n=c("w9WL"),r=c("RMBY"),o=c("8Y7J"),a=c("XBNL"),d=c("f4AX");function f(e,t){1&e&&(o.cc(0,"div",2),o.cc(1,"div",3),o.cc(2,"div",3),o.cc(3,"h4",7),o.Uc(4,"No Pending Attendance Found"),o.bc(),o.bc(),o.bc(),o.bc())}function h(e,t){if(1&e&&(o.cc(0,"div"),o.Uc(1),o.bc()),2&e){const e=o.oc().$implicit;o.Jb(1),o.Xc("",e.fName,"",e.lName," ")}}function l(e,t){if(1&e&&(o.cc(0,"div"),o.Sc(1,h,2,2,"div",13),o.bc()),2&e){const e=t.$implicit,c=o.oc().$implicit;o.Jb(1),o.vc("ngIf",c.EmployeeId==e._id)}}function u(e,t){if(1&e&&(o.cc(0,"div"),o.Uc(1),o.bc()),2&e){const e=o.oc().$implicit;o.Jb(1),o.Vc(e.designation)}}function b(e,t){if(1&e&&(o.cc(0,"div"),o.Sc(1,u,2,1,"div",13),o.bc()),2&e){const e=t.$implicit,c=o.oc().$implicit;o.Jb(1),o.vc("ngIf",c.EmployeeId==e._id)}}function p(e,t){if(1&e&&(o.cc(0,"div"),o.Uc(1),o.bc()),2&e){const e=o.oc().$implicit;o.Jb(1),o.Wc("",e.officeName," ")}}function v(e,t){if(1&e&&(o.cc(0,"div"),o.Sc(1,p,2,1,"div",13),o.bc()),2&e){const e=t.$implicit,c=o.oc().$implicit;o.Jb(1),o.vc("ngIf",c.OfficeId==e._id)}}function g(e,t){if(1&e&&(o.cc(0,"tr"),o.cc(1,"td"),o.Sc(2,l,2,1,"div",12),o.bc(),o.cc(3,"td"),o.Sc(4,b,2,1,"div",12),o.bc(),o.cc(5,"td"),o.Sc(6,v,2,1,"div",12),o.bc(),o.cc(7,"td"),o.Uc(8),o.bc(),o.cc(9,"td"),o.Uc(10),o.bc(),o.cc(11,"td"),o.Uc(12),o.bc(),o.cc(13,"td"),o.Uc(14),o.bc(),o.cc(15,"td"),o.Uc(16),o.bc(),o.bc()),2&e){const e=t.$implicit,c=o.oc(2);o.Jb(2),o.vc("ngForOf",c.employees),o.Jb(2),o.vc("ngForOf",c.employees),o.Jb(2),o.vc("ngForOf",c.reqOffices),o.Jb(2),o.Vc(e.status),o.Jb(2),o.Vc(e.date),o.Jb(2),o.Vc(e.inTime),o.Jb(2),o.Vc(e.outTime),o.Jb(2),o.Vc(e.location)}}function U(e,t){if(1&e&&(o.cc(0,"div",8),o.cc(1,"table",9),o.cc(2,"thead",10),o.cc(3,"tr",11),o.cc(4,"th"),o.Uc(5,"Employee Name"),o.bc(),o.cc(6,"th"),o.Uc(7,"Designation"),o.bc(),o.cc(8,"th"),o.Uc(9,"Office"),o.bc(),o.cc(10,"th"),o.Uc(11,"Status"),o.bc(),o.cc(12,"th"),o.Uc(13,"Date"),o.bc(),o.cc(14,"th"),o.Uc(15,"In Time"),o.bc(),o.cc(16,"th"),o.Uc(17,"Out Time"),o.bc(),o.cc(18,"th"),o.Uc(19,"Location"),o.bc(),o.bc(),o.bc(),o.cc(20,"tbody",11),o.Sc(21,g,17,8,"tr",12),o.bc(),o.bc(),o.bc()),2&e){const e=o.oc();o.Jb(21),o.vc("ngForOf",e.officeNewLeaves)}}const m=[{path:"",component:(()=>{class e{constructor(e,t,c){this.attendanceService=e,this.datepipe=t,this.userService=c,this.dateToday=Date.now(),this.attendance=[],this.offices=[],this.reqOffices=[],this.officeLeaves=[],this.countTheRecivedLeaves=0,this.officeNewLeaves=[],this.employeeId="62b08350191ff875b3a114ef",this.officeRole="62b08350191ff875b3a114f0",this.employees=[],this.users=[],this.userId=r.a.getLoggedUser().id}ngOnInit(){this.fetchCurentDate(),this.fetchAttendances(),this.fetchOffices(),this.fetchUsers()}fetchOffices(){this.userService.getUsers({}).subscribe(e=>{this.offices=e;for(let t=0,c=0;t<this.offices.length;t++)this.offices[t].RoleId==this.officeRole&&(this.reqOffices[c]=this.offices[t],this.officeCount=this.reqOffices.length,c++)})}refresh(){window.location.reload()}fetchCurentDate(){this.currentDateTime=this.datepipe.transform(new Date,"dd/MM/yyyy"),console.log(this.currentDateTime)}updateApproveStatus(e){this.attendanceService.updateAttendance(e,{isVerified:!0}).subscribe(e=>{this.refresh(),console.log("Attendance updated successfully")},e=>{})}fetchAttendances(){this.attendanceService.getAttendance({}).subscribe(e=>{this.attendance=e,this.fetchCurentDate();for(let t=0,c=0;t<this.attendance.length;t++)this.attendance[t].date==this.currentDateTime&&"out"==this.attendance[t].location&&(this.officeLeaves[c]=this.attendance[t],this.countTheRecivedLeaves=this.officeLeaves.length,c++);this.officeNewLeaves=this.officeLeaves.reverse()})}fetchUsers(){this.userService.getUsers({}).subscribe(e=>{this.users=e;for(let t=0,c=0;t<this.users.length;t++)this.users[t].RoleId==this.employeeId&&(this.employees[c]=this.users[t],c++);console.log(this.employees)})}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(a.a),o.Wb(i.e),o.Wb(d.a))},e.\u0275cmp=o.Qb({type:e,selectors:[["app-attendence-approval"]],decls:8,vars:2,consts:[[1,"row"],[1,"col-md-12","grid-margin","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title",2,"color","#727cf5"],["class","card",4,"ngIf"],["class","table-responsive pt-3",4,"ngIf"],[2,"color","red"],[1,"table-responsive","pt-3"],[1,"table","table-bordered"],[2,"background-color","rgb(194, 216, 250)"],[1,"text-center"],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(e,t){1&e&&(o.cc(0,"div",0),o.cc(1,"div",1),o.cc(2,"div",2),o.cc(3,"div",3),o.cc(4,"h6",4),o.Uc(5,"Attendance Verification List"),o.bc(),o.Sc(6,f,5,0,"div",5),o.Sc(7,U,22,1,"div",6),o.bc(),o.bc(),o.bc(),o.bc()),2&e&&(o.Jb(6),o.vc("ngIf",0==t.countTheRecivedLeaves),o.Jb(1),o.vc("ngIf",0!=t.countTheRecivedLeaves))},directives:[i.n,i.m],styles:[".color-blue[_ngcontent-%COMP%]{color:#7d98e8}td[_ngcontent-%COMP%]{word-wrap:break-word}"]}),e})()}];let y=(()=>{class e{}return e.\u0275mod=o.Ub({type:e}),e.\u0275inj=o.Tb({factory:function(t){return new(t||e)},providers:[i.e],imports:[[i.c,s.i.forChild(m),n.a]]}),e})()}}]);