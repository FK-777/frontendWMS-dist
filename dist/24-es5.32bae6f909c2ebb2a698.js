!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var c=e[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(t,c.key,c)}}function n(t,n,c){return n&&e(t.prototype,n),c&&e(t,c),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{NB7w:function(e,c,o){"use strict";o.r(c),o.d(c,"LeaveLeadModule",function(){return J});var i,a=o("ofXK"),r=o("tyNb"),l=o("lDzL"),s=o("pxUr"),b=o("3Pt+"),u=o("RMBY"),d=o("fXoL"),p=o("hccJ"),f=o("f4AX"),g=o("oOf3"),v=((i=function(){function e(){t(this,e)}return n(e,[{key:"transform",value:function(t,e,n){return e.forEach(function(e,c){e&&(t=t.filter(function(t){return-1!==t[n[c]].toString().toLowerCase().indexOf(e.toString().toLowerCase())}))}),t}}]),e}()).\u0275fac=function(t){return new(t||i)},i.\u0275pipe=d.Vb({name:"search",type:i,pure:!0}),i);function h(t,e){if(1&t&&(d.cc(0,"div",17),d.cc(1,"form",18),d.cc(2,"div",19),d.cc(3,"select",20),d.cc(4,"option",21),d.Uc(5,"Select Status"),d.bc(),d.cc(6,"option",22),d.Uc(7,"Pending"),d.bc(),d.cc(8,"option",23),d.Uc(9,"Approved"),d.bc(),d.cc(10,"option",24),d.Uc(11,"Declined"),d.bc(),d.bc(),d.bc(),d.cc(12,"div",19),d.cc(13,"select",25),d.cc(14,"option",21),d.Uc(15,"Select Type"),d.bc(),d.cc(16,"option",26),d.Uc(17,"Medical"),d.bc(),d.cc(18,"option",27),d.Uc(19,"Casual"),d.bc(),d.cc(20,"option",28),d.Uc(21,"Privilege"),d.bc(),d.bc(),d.bc(),d.cc(22,"div",19),d.Xb(23,"input",29),d.bc(),d.cc(24,"div",19),d.Xb(25,"input",30),d.bc(),d.cc(26,"div",19),d.cc(27,"button",31),d.Xb(28,"i",32),d.bc(),d.cc(29,"button",33),d.Xb(30,"i",34),d.bc(),d.bc(),d.bc(),d.bc()),2&t){var n=d.oc();d.Jb(3),d.vc("formControl",n.myStatus),d.Jb(10),d.vc("formControl",n.leaveType),d.Jb(10),d.vc("formControl",n.myDate),d.Jb(2),d.vc("formControl",n.myEndDate)}}function m(t,e){if(1&t&&(d.cc(0,"div"),d.Uc(1),d.bc()),2&t){var n=d.oc().$implicit;d.Jb(1),d.Xc("",n.fName," ",n.lName,"")}}function y(t,e){if(1&t&&(d.cc(0,"div"),d.Sc(1,m,2,2,"div",38),d.bc()),2&t){var n=e.$implicit,c=d.oc().$implicit;d.Jb(1),d.vc("ngIf",c.EmployeeId==n._id)}}function C(t,e){if(1&t){var n=d.dc();d.cc(0,"button",43),d.mc("click",function(){d.Kc(n);var t=d.oc(3);return t.show=!t.show}),d.Xb(1,"i",44),d.Uc(2,"\xa0 "),d.bc()}}function P(t,e){if(1&t){var n=d.dc();d.cc(0,"button",45),d.mc("click",function(){d.Kc(n);var t=d.oc(2).$implicit;return d.oc().updateDeclineStatus(t._id)}),d.Xb(1,"i",46),d.Uc(2,"\xa0 "),d.bc()}}function x(t,e){if(1&t){var n=d.dc();d.cc(0,"button",47),d.mc("click",function(){d.Kc(n);var t=d.oc(2).$implicit;return d.oc().updateApproveStatus(t._id)}),d.Xb(1,"i",48),d.Uc(2,"\xa0 "),d.bc()}}function O(t,e){if(1&t&&(d.cc(0,"td",39),d.Sc(1,C,3,0,"button",40),d.Sc(2,P,3,0,"button",41),d.Sc(3,x,3,0,"button",42),d.bc()),2&t){var n=d.oc(2);d.Jb(1),d.vc("ngIf",!n.show),d.Jb(1),d.vc("ngIf",n.show),d.Jb(1),d.vc("ngIf",n.show)}}function w(t,e){if(1&t&&(d.cc(0,"tr"),d.cc(1,"td"),d.Uc(2),d.bc(),d.cc(3,"td"),d.Sc(4,y,2,1,"div",14),d.bc(),d.cc(5,"td"),d.Uc(6),d.bc(),d.cc(7,"td",35),d.Uc(8),d.bc(),d.cc(9,"td",36),d.Uc(10),d.bc(),d.cc(11,"td"),d.Uc(12),d.bc(),d.Sc(13,O,4,3,"td",37),d.bc()),2&t){var n=e.$implicit,c=e.index,o=d.oc();d.Jb(2),d.Vc(c+1),d.Jb(2),d.vc("ngForOf",o.employees),d.Jb(2),d.Vc(n.leaveType),d.Jb(2),d.Vc(n.startDate),d.Jb(2),d.Vc(n.endDate),d.Jb(2),d.Vc(n.reason),d.Jb(1),d.vc("ngIf","Pending"==n.status)}}var _,M,U=function(t,e,n,c){return[t,e,n,c]},k=function(){return["status","leaveType","startDate","endDate"]},L=((_=function(){function e(n,c){t(this,e),this.leaveService=n,this.userService=c,this.leaves=[],this.users=[],this.appointmentTime=new Date,this.show=!1,this.officeLeaves=[],this.countTheRecivedLeaves=0,this.officeNewLeaves=[],this.employeeId="62b08350191ff875b3a114ef",this.employees=[],this.showFilters=!1,this.leaveType=new b.d(""),this.myStatus=new b.d(""),this.myDate=new b.d(""),this.myEndDate=new b.d(""),this.userId=u.a.getLoggedUser().id}return n(e,[{key:"ngOnInit",value:function(){this.fetchUsers(),this.fetchLeaves()}},{key:"fetchLeaves",value:function(){var t=this;this.leaveService.getLeaves({}).subscribe(function(e){t.leaves=e;for(var n=0,c=0;n<t.leaves.length;n++)"Pending"==t.leaves[n].status&&(t.officeLeaves[c]=t.leaves[n],t.countTheRecivedLeaves=t.officeLeaves.length,c++),t.config={itemsPerPage:5,currentPage:1,totalItems:t.countTheRecivedLeaves},console.log(t.officeLeaves);t.officeNewLeaves=t.officeLeaves.reverse()})}},{key:"pageChanged",value:function(t){this.config.currentPage=t}},{key:"refresh",value:function(){window.location.reload()}},{key:"updateApproveStatus",value:function(t){var e=this;this.leaveService.updateLeaves(t,{status:"Approved"}).subscribe(function(t){e.refresh(),console.log("Leaves updated successfully")},function(t){})}},{key:"updateDeclineStatus",value:function(t){var e=this;this.leaveService.updateLeaves(t,{status:"Declined"}).subscribe(function(t){e.refresh(),console.log("Leaves updated successfully")},function(t){})}},{key:"fetchUsers",value:function(){var t=this;this.userService.getUsers({}).subscribe(function(e){t.users=e;for(var n=0,c=0;n<t.users.length;n++)t.users[n].RoleId==t.employeeId&&(t.employees[c]=t.users[n],c++);console.log(t.employees)})}}]),e}()).\u0275fac=function(t){return new(t||_)(d.Wb(p.a),d.Wb(f.a))},_.\u0275cmp=d.Qb({type:_,selectors:[["app-leave-lead"]],decls:36,vars:15,consts:[[1,"card-title",2,"margin-bottom","-1%","font-weight","bold"],["type","button",1,"btn","btn-light","btn-icon",2,"float","right",3,"click"],[1,"feather","icon-filter"],[1,"row"],[1,"col-md-12","grid-margin","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title",2,"color","#727cf5"],[1,"container-fluid"],["class","filters card","style","margin-bottom: 9px; margin-top: 30px;",4,"ngIf"],[1,"table-responsive","pt-3"],[1,"table","table-bordered",2,"background-color","azure"],[2,"background-color","rgb(194, 216, 250)"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"pagination","mt-4"],[3,"pageChange"],[1,"filters","card",2,"margin-bottom","9px","margin-top","30px"],[1,"form-inline",2,"padding","9px","background-color","white"],[1,"form-group","ml-2"],["id","mySta",1,"form-control",3,"formControl"],["value",""],["value","Pending"],["value","Approved"],["value","Declined"],["id","leaveT",1,"form-control",3,"formControl"],["value","Medical"],["value","Casual"],["value","Privilege"],["type","date","min","0","id","start-date","placeholder","start Date",1,"form-control",3,"formControl"],["type","date","min","0","id","user_max_price","placeholder","End Date",1,"form-control",3,"formControl"],["type","button",1,"btn","btn-primary"],[1,"feather","icon-search"],["type","button",1,"btn","btn-light","ml-1"],[1,"feather","icon-refresh-ccw"],["value","lev.startDate"],["value","lev.endDate"],["class","td-actions text-center",4,"ngIf"],[4,"ngIf"],[1,"td-actions","text-center"],["class","btn btn-light btn-icon",3,"click",4,"ngIf"],["class","btn btn-light btn-icon","style","background-color: red;",3,"click",4,"ngIf"],["class","btn btn-light btn-icon ml-2","style","background-color: rgb(115, 250, 115);",3,"click",4,"ngIf"],[1,"btn","btn-light","btn-icon",3,"click"],[1,"feather","icon-info"],[1,"btn","btn-light","btn-icon",2,"background-color","red",3,"click"],[1,"feather","icon-x"],[1,"btn","btn-light","btn-icon","ml-2",2,"background-color","rgb(115, 250, 115)",3,"click"],[1,"feather","icon-check"]],template:function(t,e){1&t&&(d.cc(0,"h4",0),d.cc(1,"button",1),d.mc("click",function(){return e.showFilters=!e.showFilters}),d.Xb(2,"i",2),d.Uc(3,"\xa0 "),d.bc(),d.bc(),d.cc(4,"div",3),d.cc(5,"div",4),d.cc(6,"div",5),d.cc(7,"div",6),d.cc(8,"h6",7),d.Uc(9,"Leave List"),d.bc(),d.cc(10,"div",8),d.Sc(11,h,31,4,"div",9),d.bc(),d.cc(12,"div",10),d.cc(13,"table",11),d.cc(14,"thead",12),d.cc(15,"tr",13),d.cc(16,"th"),d.Uc(17,"#"),d.bc(),d.cc(18,"th"),d.Uc(19,"Employee Name"),d.bc(),d.cc(20,"th"),d.Uc(21,"Leave Type"),d.bc(),d.cc(22,"th"),d.Uc(23,"start Date"),d.bc(),d.cc(24,"th"),d.Uc(25,"End Date"),d.bc(),d.cc(26,"th"),d.Uc(27,"Reason"),d.bc(),d.cc(28,"th"),d.Uc(29,"Action"),d.bc(),d.bc(),d.bc(),d.cc(30,"tbody",13),d.Sc(31,w,14,7,"tr",14),d.pc(32,"search"),d.pc(33,"paginate"),d.bc(),d.bc(),d.cc(34,"div",15),d.cc(35,"pagination-controls",16),d.mc("pageChange",function(t){return e.pageChanged(t)}),d.bc(),d.bc(),d.bc(),d.bc(),d.bc(),d.bc(),d.bc()),2&t&&(d.Jb(11),d.vc("ngIf",e.showFilters),d.Jb(20),d.vc("ngForOf",d.sc(32,2,d.rc(33,6,e.officeLeaves,e.config),d.Cc(9,U,e.myStatus.value,e.leaveType.value,e.myDate.value,e.myEndDate.value),d.yc(14,k))))},directives:[a.n,a.m,g.c,b.u,b.m,b.n,b.r,b.l,b.e,b.o,b.t,b.b],pipes:[v,g.b],styles:[".color-blue[_ngcontent-%COMP%]{color:#7d98e8}td[_ngcontent-%COMP%]{word-wrap:break-word}.website[_ngcontent-%COMP%]{letter-spacing:.5px;display:block;cursor:pointer;background-color:#313b3f;color:#fcdb42;padding:10px;text-decoration:none;text-align:right}#table-component[_ngcontent-%COMP%], .website[_ngcontent-%COMP%]{font:normal 14px sans-serif}#table-component[_ngcontent-%COMP%]{margin:15px auto 0;border:1px solid #000;border-radius:4px;height:400px;max-width:500px}#table-component[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{background-color:#313b3f;color:#fcdb42;padding:10px;margin:0}#table-component[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin-top:15px;width:100%;border-collapse:collapse}#table-component[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{padding-left:10px}#table-component[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:33.3%;font-size:13px}#table-component[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{font-size:14px}#table-component[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:1px solid #000;text-align:left;padding-bottom:5px}#table-component[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .pl-15[_ngcontent-%COMP%]{padding-left:15px}#table-component[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 0;border-bottom:1px solid #d3d3d3}#table-component[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{font-size:14px;text-align:center;margin:20px auto}#table-component[_ngcontent-%COMP%]     .pagination-next a, #table-component[_ngcontent-%COMP%]     .pagination-previous a{outline:none}#table-component[_ngcontent-%COMP%]     .ngx-pagination .current{border-radius:4px}#table-component[_ngcontent-%COMP%]     .ngx-pagination{padding:0!important}#table-component[_ngcontent-%COMP%]     .ngx-pagination a:hover, #table-component[_ngcontent-%COMP%]     .ngx-pagination button:hover{border-radius:4px}#table-component[_ngcontent-%COMP%]     .ngx-pagination a, #table-component[_ngcontent-%COMP%]     .ngx-pagination button{border-radius:4px;outline:none}@media screen and (max-width:520px){#table-component[_ngcontent-%COMP%]{margin:15px}}"]}),_),S=o("cZdB"),D=[{path:"",component:L}],J=((M=n(function e(){t(this,e)})).\u0275mod=d.Ub({type:M}),M.\u0275inj=d.Tb({factory:function(t){return new(t||M)},providers:[a.e],imports:[[a.c,r.i.forChild(D),b.i,b.q,l.a,g.a,S.a,s.a.forRoot({apiKey:"AIzaSyAP8n5GbRjUqB9dQfxDfZLJuFam4PjHOTs"})]]}),M)},hccJ:function(e,c,o){"use strict";o.d(c,"a",function(){return l});var i=o("f8oD"),a=o("gQwx"),r=o("fXoL"),l=function(){var e=function(){function e(n){t(this,e),this.http=n,this.leaveUrl=a.a.mainApiUrl()+"/leave"}return n(e,[{key:"getLeaves",value:function(t){return this.http.get(this.leaveUrl+i.a.objToQuery(t))}},{key:"createLeaves",value:function(t){return console.log("Create!"),console.log(t),console.log(this.leaveUrl),this.http.post(this.leaveUrl,t)}},{key:"updateLeaves",value:function(t,e){return this.http.patch(this.leaveUrl+"/"+t,e)}},{key:"deleteLeaves",value:function(t){return this.http.delete(this.leaveUrl+"/"+t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.jc(i.a))},e.\u0275prov=r.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}])}();