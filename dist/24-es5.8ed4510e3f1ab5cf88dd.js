!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var c=0;c<t.length;c++){var n=t[c];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,c,n){return c&&t(e.prototype,c),n&&t(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{NB7w:function(t,n,o){"use strict";o.r(n),o.d(n,"LeaveLeadModule",function(){return R});var i,a=o("SVse"),r=o("iInd"),l=o("w9WL"),s=o("LSHg"),b=o("s7LF"),f=o("RMBY"),u=o("8Y7J"),d=o("hccJ"),p=o("f4AX"),v=o("xkgV"),g=((i=function(){function t(){e(this,t)}return c(t,[{key:"transform",value:function(e,t,c){return t.forEach(function(t,n){t&&(e=e.filter(function(e){return-1!==e[c[n]].toString().toLowerCase().indexOf(t.toString().toLowerCase())}))}),e}}]),t}()).\u0275fac=function(e){return new(e||i)},i.\u0275pipe=u.Vb({name:"search",type:i,pure:!0}),i);function h(e,t){if(1&e&&(u.cc(0,"div",24),u.cc(1,"form",25),u.cc(2,"div",26),u.cc(3,"select",27),u.cc(4,"option",28),u.Uc(5,"Select Status"),u.bc(),u.cc(6,"option",29),u.Uc(7,"Pending"),u.bc(),u.cc(8,"option",30),u.Uc(9,"Approved"),u.bc(),u.cc(10,"option",31),u.Uc(11,"Declined"),u.bc(),u.bc(),u.bc(),u.cc(12,"div",26),u.cc(13,"select",32),u.cc(14,"option",28),u.Uc(15,"Select Type"),u.bc(),u.cc(16,"option",33),u.Uc(17,"Medical"),u.bc(),u.cc(18,"option",34),u.Uc(19,"Casual"),u.bc(),u.cc(20,"option",35),u.Uc(21,"Privilege"),u.bc(),u.bc(),u.bc(),u.cc(22,"div",26),u.Xb(23,"input",36),u.bc(),u.cc(24,"div",26),u.Xb(25,"input",37),u.bc(),u.cc(26,"div",26),u.cc(27,"button",38),u.Xb(28,"i",39),u.bc(),u.cc(29,"button",40),u.Xb(30,"i",41),u.bc(),u.bc(),u.bc(),u.bc()),2&e){var c=u.oc();u.Jb(3),u.vc("formControl",c.myStatus),u.Jb(10),u.vc("formControl",c.leaveType),u.Jb(10),u.vc("formControl",c.myDate),u.Jb(2),u.vc("formControl",c.myEndDate)}}function m(e,t){if(1&e&&(u.cc(0,"div"),u.Uc(1),u.bc()),2&e){var c=u.oc().$implicit;u.Jb(1),u.Xc("",c.fName," ",c.lName,"")}}function y(e,t){if(1&e&&(u.cc(0,"div"),u.Sc(1,m,2,2,"div",45),u.bc()),2&e){var c=t.$implicit,n=u.oc().$implicit;u.Jb(1),u.vc("ngIf",n.EmployeeId==c._id)}}function C(e,t){if(1&e&&(u.cc(0,"div"),u.Uc(1),u.bc()),2&e){var c=u.oc().$implicit;u.Jb(1),u.Vc(c.designation)}}function O(e,t){if(1&e&&(u.cc(0,"div"),u.Sc(1,C,2,1,"div",45),u.bc()),2&e){var c=t.$implicit,n=u.oc().$implicit;u.Jb(1),u.vc("ngIf",n.EmployeeId==c._id)}}function P(e,t){if(1&e&&(u.cc(0,"div"),u.Uc(1),u.bc()),2&e){var c=u.oc().$implicit;u.Jb(1),u.Wc("",c.officeName," ")}}function x(e,t){if(1&e&&(u.cc(0,"div"),u.Sc(1,P,2,1,"div",45),u.bc()),2&e){var c=t.$implicit,n=u.oc().$implicit;u.Jb(1),u.vc("ngIf",n.OfficeId==c._id)}}function w(e,t){if(1&e){var c=u.dc();u.cc(0,"button",50),u.mc("click",function(){u.Kc(c);var e=u.oc(3);return e.show=!e.show}),u.Xb(1,"i",51),u.Uc(2,"\xa0 "),u.bc()}}function _(e,t){if(1&e){var c=u.dc();u.cc(0,"button",52),u.mc("click",function(){u.Kc(c);var e=u.oc(2).$implicit;return u.oc().updateDeclineStatus(e._id)}),u.Xb(1,"i",53),u.Uc(2,"\xa0 "),u.bc()}}function U(e,t){if(1&e){var c=u.dc();u.cc(0,"button",54),u.mc("click",function(){u.Kc(c);var e=u.oc(2).$implicit;return u.oc().updateApproveStatus(e._id)}),u.Xb(1,"i",55),u.Uc(2,"\xa0 "),u.bc()}}function M(e,t){if(1&e&&(u.cc(0,"td",46),u.Sc(1,w,3,0,"button",47),u.Sc(2,_,3,0,"button",48),u.Sc(3,U,3,0,"button",49),u.bc()),2&e){var c=u.oc(2);u.Jb(1),u.vc("ngIf",!c.show),u.Jb(1),u.vc("ngIf",c.show),u.Jb(1),u.vc("ngIf",c.show)}}function k(e,t){if(1&e&&(u.cc(0,"tr"),u.cc(1,"td"),u.Uc(2),u.bc(),u.cc(3,"td"),u.Sc(4,y,2,1,"div",21),u.bc(),u.cc(5,"td"),u.Sc(6,O,2,1,"div",21),u.bc(),u.cc(7,"td"),u.Sc(8,x,2,1,"div",21),u.bc(),u.cc(9,"td"),u.Uc(10),u.bc(),u.cc(11,"td",42),u.Uc(12),u.bc(),u.cc(13,"td",43),u.Uc(14),u.bc(),u.cc(15,"td"),u.Uc(16),u.bc(),u.Sc(17,M,4,3,"td",44),u.bc()),2&e){var c=t.$implicit,n=t.index,o=u.oc();u.Jb(2),u.Vc(n+1),u.Jb(2),u.vc("ngForOf",o.employees),u.Jb(2),u.vc("ngForOf",o.employees),u.Jb(2),u.vc("ngForOf",o.reqOffices),u.Jb(2),u.Vc(c.leaveType),u.Jb(2),u.Vc(c.startDate),u.Jb(2),u.Vc(c.endDate),u.Jb(2),u.Vc(c.reason),u.Jb(1),u.vc("ngIf","Pending"==c.status)}}var L,S,J=function(e,t,c,n){return[e,t,c,n]},I=function(){return["status","leaveType","startDate","endDate"]},D=((L=function(){function t(c,n){e(this,t),this.leaveService=c,this.userService=n,this.leaves=[],this.users=[],this.offices=[],this.reqOffices=[],this.appointmentTime=new Date,this.show=!1,this.officeLeaves=[],this.countTheRecivedLeaves=0,this.officeNewLeaves=[],this.employeeId="62b08350191ff875b3a114ef",this.officeRole="62b08350191ff875b3a114f0",this.employees=[],this.showFilters=!1,this.leaveType=new b.d(""),this.myStatus=new b.d(""),this.myDate=new b.d(""),this.myEndDate=new b.d(""),this.userId=f.a.getLoggedUser().id}return c(t,[{key:"ngOnInit",value:function(){this.fetchUsers(),this.fetchLeaves(),this.fetchOffices()}},{key:"fetchOffices",value:function(){var e=this;this.userService.getUsers({}).subscribe(function(t){e.offices=t;for(var c=0,n=0;c<e.offices.length;c++)e.offices[c].RoleId==e.officeRole&&(e.reqOffices[n]=e.offices[c],e.officeCount=e.reqOffices.length,n++)})}},{key:"fetchLeaves",value:function(){var e=this;this.leaveService.getLeaves({}).subscribe(function(t){e.leaves=t;for(var c=0,n=0;c<e.leaves.length;c++)"Pending"==e.leaves[c].status&&(e.officeLeaves[n]=e.leaves[c],e.countTheRecivedLeaves=e.officeLeaves.length,n++),e.config={itemsPerPage:5,currentPage:1,totalItems:e.countTheRecivedLeaves},console.log(e.officeLeaves);e.officeNewLeaves=e.officeLeaves.reverse()})}},{key:"pageChanged",value:function(e){this.config.currentPage=e}},{key:"refresh",value:function(){window.location.reload()}},{key:"updateApproveStatus",value:function(e){var t=this;this.leaveService.updateLeaves(e,{status:"Approved"}).subscribe(function(e){t.refresh(),console.log("Leaves updated successfully")},function(e){})}},{key:"updateDeclineStatus",value:function(e){var t=this;this.leaveService.updateLeaves(e,{status:"Declined"}).subscribe(function(e){t.refresh(),console.log("Leaves updated successfully")},function(e){})}},{key:"fetchUsers",value:function(){var e=this;this.userService.getUsers({}).subscribe(function(t){e.users=t;for(var c=0,n=0;c<e.users.length;c++)e.users[c].RoleId==e.employeeId&&(e.employees[n]=e.users[c],n++);console.log(e.employees)})}}]),t}()).\u0275fac=function(e){return new(e||L)(u.Wb(d.a),u.Wb(p.a))},L.\u0275cmp=u.Qb({type:L,selectors:[["app-leave-lead"]],decls:54,vars:15,consts:[[1,"row"],[1,"col-md-12"],[1,"card-title","color-blue"],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"card-title",2,"margin-bottom","-1%","font-weight","bold"],["type","button",1,"btn","btn-light","btn-icon",2,"float","right",3,"click"],[1,"feather","icon-filter"],[1,"col-md-12","grid-margin","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title",2,"color","#727cf5"],[1,"container-fluid"],["class","filters card","style","margin-bottom: 9px; margin-top: 30px;",4,"ngIf"],[1,"table-responsive","pt-3"],[1,"table","table-bordered",2,"background-color","azure"],[2,"background-color","rgb(194, 216, 250)"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"pagination","mt-4"],[3,"pageChange"],[1,"filters","card",2,"margin-bottom","9px","margin-top","30px"],[1,"form-inline",2,"padding","9px","background-color","white"],[1,"form-group","ml-2"],["id","mySta",1,"form-control",3,"formControl"],["value",""],["value","Pending"],["value","Approved"],["value","Declined"],["id","leaveT",1,"form-control",3,"formControl"],["value","Medical"],["value","Casual"],["value","Privilege"],["type","date","min","0","id","start-date","placeholder","start Date",1,"form-control",3,"formControl"],["type","date","min","0","id","user_max_price","placeholder","End Date",1,"form-control",3,"formControl"],["type","button",1,"btn","btn-primary"],[1,"feather","icon-search"],["type","button",1,"btn","btn-light","ml-1"],[1,"feather","icon-refresh-ccw"],["value","lev.startDate"],["value","lev.endDate"],["class","td-actions text-center",4,"ngIf"],[4,"ngIf"],[1,"td-actions","text-center"],["class","btn btn-light btn-icon",3,"click",4,"ngIf"],["class","btn btn-light btn-icon","style","background-color: red;",3,"click",4,"ngIf"],["class","btn btn-light btn-icon ml-2","style","background-color: rgb(115, 250, 115);",3,"click",4,"ngIf"],[1,"btn","btn-light","btn-icon",3,"click"],[1,"feather","icon-info"],[1,"btn","btn-light","btn-icon",2,"background-color","red",3,"click"],[1,"feather","icon-x"],[1,"btn","btn-light","btn-icon","ml-2",2,"background-color","rgb(115, 250, 115)",3,"click"],[1,"feather","icon-check"]],template:function(e,t){1&e&&(u.cc(0,"div",0),u.cc(1,"div",1),u.cc(2,"h3",2),u.Uc(3,"Requested Leaves"),u.bc(),u.cc(4,"nav",3),u.cc(5,"ol",4),u.cc(6,"li",5),u.cc(7,"a",6),u.Uc(8,"Dashboard"),u.bc(),u.bc(),u.cc(9,"li",5),u.cc(10,"a",6),u.Uc(11,"Approval"),u.bc(),u.bc(),u.cc(12,"li",7),u.Uc(13,"Leaves"),u.bc(),u.bc(),u.bc(),u.bc(),u.bc(),u.cc(14,"h4",8),u.cc(15,"button",9),u.mc("click",function(){return t.showFilters=!t.showFilters}),u.Xb(16,"i",10),u.Uc(17,"\xa0 "),u.bc(),u.bc(),u.cc(18,"div",0),u.cc(19,"div",11),u.cc(20,"div",12),u.cc(21,"div",13),u.cc(22,"h6",14),u.Uc(23,"Leave List"),u.bc(),u.cc(24,"div",15),u.Sc(25,h,31,4,"div",16),u.bc(),u.cc(26,"div",17),u.cc(27,"table",18),u.cc(28,"thead",19),u.cc(29,"tr",20),u.cc(30,"th"),u.Uc(31,"#"),u.bc(),u.cc(32,"th"),u.Uc(33,"Employee Name"),u.bc(),u.cc(34,"th"),u.Uc(35,"Designation"),u.bc(),u.cc(36,"th"),u.Uc(37,"Office"),u.bc(),u.cc(38,"th"),u.Uc(39,"Leave Type"),u.bc(),u.cc(40,"th"),u.Uc(41,"start Date"),u.bc(),u.cc(42,"th"),u.Uc(43,"End Date"),u.bc(),u.cc(44,"th"),u.Uc(45,"Reason"),u.bc(),u.cc(46,"th"),u.Uc(47,"Action"),u.bc(),u.bc(),u.bc(),u.cc(48,"tbody",20),u.Sc(49,k,18,9,"tr",21),u.pc(50,"paginate"),u.pc(51,"search"),u.bc(),u.bc(),u.cc(52,"div",22),u.cc(53,"pagination-controls",23),u.mc("pageChange",function(e){return t.pageChanged(e)}),u.bc(),u.bc(),u.bc(),u.bc(),u.bc(),u.bc(),u.bc()),2&e&&(u.Jb(25),u.vc("ngIf",t.showFilters),u.Jb(24),u.vc("ngForOf",u.rc(50,2,u.sc(51,5,t.officeLeaves,u.Cc(9,J,t.myStatus.value,t.leaveType.value,t.myDate.value,t.myEndDate.value),u.yc(14,I)),t.config)))},directives:[r.h,a.n,a.m,v.c,b.u,b.m,b.n,b.r,b.l,b.e,b.o,b.t,b.b],pipes:[v.b,g],styles:[".color-blue[_ngcontent-%COMP%]{color:#7d98e8}td[_ngcontent-%COMP%]{word-wrap:break-word}.website[_ngcontent-%COMP%]{letter-spacing:.5px;display:block;cursor:pointer;background-color:#313b3f;color:#fcdb42;padding:10px;text-decoration:none;text-align:right}#table-component[_ngcontent-%COMP%], .website[_ngcontent-%COMP%]{font:normal 14px sans-serif}#table-component[_ngcontent-%COMP%]{margin:15px auto 0;border:1px solid #000;border-radius:4px;height:400px;max-width:500px}#table-component[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{background-color:#313b3f;color:#fcdb42;padding:10px;margin:0}#table-component[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin-top:15px;width:100%;border-collapse:collapse}#table-component[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{padding-left:10px}#table-component[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:33.3%;font-size:13px}#table-component[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{font-size:14px}#table-component[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:1px solid #000;text-align:left;padding-bottom:5px}#table-component[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .pl-15[_ngcontent-%COMP%]{padding-left:15px}#table-component[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 0;border-bottom:1px solid #d3d3d3}#table-component[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{font-size:14px;text-align:center;margin:20px auto}#table-component[_ngcontent-%COMP%]     .pagination-next a, #table-component[_ngcontent-%COMP%]     .pagination-previous a{outline:none}#table-component[_ngcontent-%COMP%]     .ngx-pagination .current{border-radius:4px}#table-component[_ngcontent-%COMP%]     .ngx-pagination{padding:0!important}#table-component[_ngcontent-%COMP%]     .ngx-pagination a:hover, #table-component[_ngcontent-%COMP%]     .ngx-pagination button:hover{border-radius:4px}#table-component[_ngcontent-%COMP%]     .ngx-pagination a, #table-component[_ngcontent-%COMP%]     .ngx-pagination button{border-radius:4px;outline:none}@media screen and (max-width:520px){#table-component[_ngcontent-%COMP%]{margin:15px}}"]}),L),T=o("KeVr"),F=[{path:"",component:D}],R=((S=c(function t(){e(this,t)})).\u0275mod=u.Ub({type:S}),S.\u0275inj=u.Tb({factory:function(e){return new(e||S)},providers:[a.e],imports:[[a.c,r.i.forChild(F),b.i,b.q,l.a,v.a,T.a,s.a.forRoot({apiKey:"AIzaSyAP8n5GbRjUqB9dQfxDfZLJuFam4PjHOTs"})]]}),S)},hccJ:function(t,n,o){"use strict";o.d(n,"a",function(){return l});var i=o("f8oD"),a=o("gQwx"),r=o("8Y7J"),l=function(){var t=function(){function t(c){e(this,t),this.http=c,this.leaveUrl=a.a.mainApiUrl()+"/leave"}return c(t,[{key:"getLeaves",value:function(e){return this.http.get(this.leaveUrl+i.a.objToQuery(e))}},{key:"createLeaves",value:function(e){return console.log("Create!"),console.log(e),console.log(this.leaveUrl),this.http.post(this.leaveUrl,e)}},{key:"updateLeaves",value:function(e,t){return this.http.patch(this.leaveUrl+"/"+e,t)}},{key:"deleteLeaves",value:function(e){return this.http.delete(this.leaveUrl+"/"+e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.jc(i.a))},t.\u0275prov=r.Sb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}])}();