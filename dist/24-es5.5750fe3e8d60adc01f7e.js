!function(){function e(e,c){if(!(e instanceof c))throw new TypeError("Cannot call a class as a function")}function c(e,c){for(var o=0;o<c.length;o++){var t=c[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function o(e,o,t){return o&&c(e.prototype,o),t&&c(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{SSQ5:function(c,t,r){"use strict";r.r(t),r.d(t,"AuthModule",function(){return M});var i=r("SVse"),n=r("s7LF"),a=r("RMBY"),l=r("vVw+"),s=r("8Y7J"),m=r("iInd"),d=r("9ixH"),g=r("EApP");function u(e,c){if(1&e&&(s.cc(0,"p",25),s.Tc(1),s.bc()),2&e){var o=s.oc();s.Jb(1),s.Vc(" ",o.emailError(),"")}}function b(e,c){if(1&e){var o=s.dc();s.cc(0,"p",26),s.mc("click",function(){return s.Jc(o),s.oc().resendVerificationLink()}),s.Tc(1,"Need verification email? "),s.cc(2,"a"),s.Tc(3,"Send Now"),s.bc(),s.bc()}}function p(e,c){if(1&e&&(s.cc(0,"p",25),s.Tc(1),s.bc()),2&e){var o=s.oc();s.Jb(1),s.Vc(" ",o.passwordError(),"")}}var h,f,v,w,y=((f=function(){function c(o,t,r,i){e(this,c),this.router=o,this.formBuilder=t,this.authenticationService=r,this.toastrService=i,this.verificationEmailBtn=!1}return o(c,[{key:"ngOnInit",value:function(){this.createForm()}},{key:"createForm",value:function(){var e=l.a.getItem("ci_email_remember")||"";this.loginForm=this.formBuilder.group({email:[e,[n.r.minLength(5),n.r.maxLength(100),n.r.required,n.r.pattern(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)]],password:["",[n.r.minLength(2),n.r.maxLength(100),n.r.required]],rememberMe:[!1]})}},{key:"login",value:function(){var e=this;if(this.loginForm.invalid)this.loginForm.markAllAsTouched();else{this.loading=!0,this.verificationEmailBtn=!1;var c=this.loginForm.get("email").value.toString(),o=this.loginForm.get("password").value;this.loginForm.get("rememberMe").value?l.a.setItem("ci_email_remember",c):l.a.removeItem("ci_email_remember"),this.authenticationService.login(c,o).then(function(c){e.loading=!1,e.loginForm.reset(),a.a.setLoggedUser(c),console.log("before"),e.toastrService.success("Login Successful!"),console.log("sjd"),console.log(c),console.log(c.role);var o=a.a.getLoggedUser();console.log(o.role),"2BJAqSGjDNeL1AVMnv7l"==o.role?(e.router.navigate(["/dashboard"]),console.log("To Dash")):"employee"==o.role?(e.router.navigate(["/auth/login"]),console.log("To Customer")):"office"==o.role?e.router.navigate(["/office-employees/add-employee"]):(e.router.navigate(["/login"]),console.log("Role not exist"))},function(c){c.error&&c.error.message&&e.toastrService.error(c.error.message),c.error&&c.error.error&&"please-verify"==c.error.error&&(e.verificationEmailBtn=!0),e.loading=!1})}}},{key:"resendVerificationLink",value:function(){var e=this;this.loginForm.controls.email.invalid||this.loading?this.loginForm.controls.email.markAsDirty():(this.verificationEmailBtn=!1,this.loading=!0,this.authenticationService.resendVerification(this.loginForm.get("email").value.toString()).then(function(c){e.loading=!1,e.toastrService.success("Verification email sent","Success")},function(c){c.error&&c.error.message&&e.toastrService.error(c.error.message),e.loading=!1}))}},{key:"resetPassword",value:function(){this.router.navigate(["/auth/password-forgot"])}},{key:"emailError",value:function(){return this.loginForm.controls.email.hasError("required")?"Valid email is required":this.loginForm.controls.email.hasError("maxlength")?"Email cannot exceed 100 characters":this.loginForm.controls.email.hasError("minlength")?"Email is required of minimum length of 5 characters":this.loginForm.controls.email.hasError("pattern")?"Valid email is required":""}},{key:"passwordError",value:function(){return this.loginForm.controls.password.hasError("required")?"Password is required":this.loginForm.controls.password.hasError("minlength")?"Password is required of minimum length of 8 characters":this.loginForm.controls.password.hasError("maxlength")?"Password cannot exceed 100 characters":""}}]),c}()).\u0275fac=function(e){return new(e||f)(s.Wb(m.e),s.Wb(n.c),s.Wb(d.a),s.Wb(g.b))},f.\u0275cmp=s.Qb({type:f,selectors:[["app-login"]],decls:36,vars:5,consts:[[1,"row","w-80","mx-0","auth-page"],[1,"col-md-8","col-xl-6","mx-auto"],[1,"card"],[1,"row"],[1,"col-md-12","pl-md-12"],[1,"auth-form-wrapper","px-4","py-5"],[1,"col-12"],[1,"color-blue","text-center"],[1,"text-center"],["src","assets/logo.png","alt","logo","width","100","height","100"],[1,"forms-sample",3,"formGroup"],[1,"form-group"],["for","email"],["type","email","id","email","placeholder","Email","formControlName","email",1,"form-control"],["class","text-danger mt-1",4,"ngIf"],["class","mt-1 text-muted",3,"click",4,"ngIf"],["for","password"],["type","password","id","password","placeholder","Password","formControlName","password",1,"form-control"],[1,"form-check","form-check-flat","form-check-primary"],[1,"form-check-label"],["type","checkbox","formControlName","rememberMe",1,"form-check-input"],[1,"input-frame"],[1,"mt-3"],["type","button",1,"btn","btn-primary","mr-2","mb-2","mb-md-0",3,"disabled","click"],["routerLink","/auth/forgot-password",1,"d-block","mt-3","text-muted"],[1,"text-danger","mt-1"],[1,"mt-1","text-muted",3,"click"]],template:function(e,c){1&e&&(s.cc(0,"div",0),s.cc(1,"div",1),s.cc(2,"div",2),s.cc(3,"div",3),s.cc(4,"div",4),s.cc(5,"div",5),s.cc(6,"div",3),s.cc(7,"div",6),s.cc(8,"h3",7),s.Tc(9,"Waste Management System"),s.bc(),s.Xb(10,"br"),s.cc(11,"div",8),s.Xb(12,"img",9),s.bc(),s.bc(),s.Xb(13,"br"),s.bc(),s.cc(14,"form",10),s.cc(15,"div",11),s.cc(16,"label",12),s.Tc(17,"Email address"),s.bc(),s.Xb(18,"input",13),s.Rc(19,u,2,1,"p",14),s.Rc(20,b,4,0,"p",15),s.bc(),s.cc(21,"div",11),s.cc(22,"label",16),s.Tc(23,"Password"),s.bc(),s.Xb(24,"input",17),s.Rc(25,p,2,1,"p",14),s.bc(),s.cc(26,"div",18),s.cc(27,"label",19),s.Xb(28,"input",20),s.Xb(29,"i",21),s.Tc(30," Remember my email "),s.bc(),s.bc(),s.cc(31,"div",22),s.cc(32,"button",23),s.mc("click",function(){return c.login()}),s.Tc(33,"Login"),s.bc(),s.cc(34,"a",24),s.Tc(35,"Forgot password? Reset"),s.bc(),s.bc(),s.bc(),s.bc(),s.bc(),s.bc(),s.bc(),s.bc(),s.bc()),2&e&&(s.Jb(14),s.uc("formGroup",c.loginForm),s.Jb(5),s.uc("ngIf",c.loginForm.controls.email.touched||c.loginForm.controls.email.dirty),s.Jb(1),s.uc("ngIf",c.verificationEmailBtn),s.Jb(5),s.uc("ngIf",c.loginForm.controls.password.touched||c.loginForm.controls.password.dirty),s.Jb(7),s.uc("disabled",c.loginForm.invalid||c.loading))},directives:[n.t,n.l,n.g,n.b,n.k,n.f,i.n,n.a,m.g],styles:["[_nghost-%COMP%]{height:100vh;display:flex;align-items:center;justify-content:center}.color-blue[_ngcontent-%COMP%]{color:#7d98e8}.ulineform[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;border:none;border-bottom:1px solid #c2bba7}.center[_ngcontent-%COMP%]{text-align:center}.align-right[_ngcontent-%COMP%]{text-align:right}.size[_ngcontent-%COMP%]{width:-webkit-fill-available;height:50px}.icon-size[_ngcontent-%COMP%]{font-size:20px}.padding-top[_ngcontent-%COMP%]{padding-top:10px}.padding-topp[_ngcontent-%COMP%]{padding-top:30px}.padding-left[_ngcontent-%COMP%]{padding-left:30px}"]}),f),x=((h=function(){function c(o){e(this,c),this.router=o}return o(c,[{key:"ngOnInit",value:function(){}},{key:"onRegister",value:function(e){e.preventDefault(),localStorage.setItem("isLoggedin","true"),localStorage.getItem("isLoggedin")&&this.router.navigate(["/"])}}]),c}()).\u0275fac=function(e){return new(e||h)(s.Wb(m.e))},h.\u0275cmp=s.Qb({type:h,selectors:[["app-register"]],decls:56,vars:0,consts:[[1,"row","w-80","mx-0","auth-page"],[1,"col-md-8","col-xl-6","mx-auto"],[1,"card"],[1,"row"],[1,"col-md-12","pl-md-12"],[1,"auth-form-wrapper","px-4","py-5"],[1,"col-12"],[1,"color-blue","text-center"],[1,"text-center"],["src","https://www.vtechbarcode.com.my/wp-content/uploads/2020/02/how-warehouse-managements-system-improves-business-performance-1-1.png","alt","logo","width","100","height","100"],[1,"forms-sample"],[1,"row","mt-4"],[1,"col-sm-1","padding-top"],[1,"form-group"],[1,"feather","icon-user","icon-size"],[1,"col-sm-10"],["type","text","placeholder","User Name",1,"form-control","ulineform"],[1,"feather","icon-mail","icon-size"],["type","email","placeholder","Email",1,"form-control","ulineform"],[1,"feather","icon-lock","icon-size"],["type","password","autocomplete","current-password","placeholder","Password",1,"form-control","ulineform"],[1,"col-sm-6"],[1,"form-check","form-check-flat","form-check-primary"],[1,"form-check-label"],["type","checkbox",1,"form-check-input"],[1,"input-frame"],[1,"row","text-center"],[1,"col-sm-2"],[1,"col-sm-8"],["type","submit",1,"btn","btn-primary","size",3,"click"],["routerLink","/auth/register",1,"d-block","mt-3","text-muted"]],template:function(e,c){1&e&&(s.cc(0,"div",0),s.cc(1,"div",1),s.cc(2,"div",2),s.cc(3,"div",3),s.cc(4,"div",4),s.cc(5,"div",5),s.cc(6,"div",3),s.cc(7,"div",6),s.cc(8,"h3",7),s.Tc(9,"Waste Management System"),s.bc(),s.Xb(10,"br"),s.cc(11,"div",8),s.Xb(12,"img",9),s.bc(),s.bc(),s.Xb(13,"br"),s.bc(),s.cc(14,"form",10),s.cc(15,"div",11),s.cc(16,"div",12),s.cc(17,"div",13),s.Xb(18,"i",14),s.bc(),s.bc(),s.cc(19,"div",15),s.cc(20,"div",13),s.Xb(21,"input",16),s.bc(),s.bc(),s.bc(),s.cc(22,"div",3),s.cc(23,"div",12),s.cc(24,"div",13),s.Xb(25,"i",17),s.bc(),s.bc(),s.cc(26,"div",15),s.cc(27,"div",13),s.Xb(28,"input",18),s.bc(),s.bc(),s.bc(),s.cc(29,"div",3),s.cc(30,"div",12),s.cc(31,"div",13),s.Xb(32,"i",19),s.bc(),s.bc(),s.cc(33,"div",15),s.cc(34,"div",13),s.Xb(35,"input",20),s.bc(),s.bc(),s.bc(),s.bc(),s.cc(36,"form",10),s.cc(37,"div",3),s.cc(38,"div",21),s.cc(39,"div",13),s.cc(40,"div",22),s.cc(41,"label",23),s.Xb(42,"input",24),s.Xb(43,"i",25),s.Tc(44," Remember me "),s.bc(),s.bc(),s.bc(),s.bc(),s.bc(),s.cc(45,"div",26),s.cc(46,"div",27),s.Xb(47,"div"),s.bc(),s.cc(48,"div",28),s.cc(49,"div",13),s.cc(50,"button",29),s.mc("click",function(e){return c.onRegister(e)}),s.Tc(51,"Register"),s.bc(),s.bc(),s.bc(),s.cc(52,"div",27),s.Xb(53,"div"),s.bc(),s.bc(),s.cc(54,"a",30),s.Tc(55,"Already a user? Sign in"),s.bc(),s.bc(),s.bc(),s.bc(),s.bc(),s.bc(),s.bc(),s.bc())},directives:[n.t,n.l,n.m,m.g],styles:["[_nghost-%COMP%]{height:100vh;display:flex;align-items:center;justify-content:center}.color-blue[_ngcontent-%COMP%]{color:#7d98e8}.ulineform[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;border:none;border-bottom:1px solid #c2bba7}.center[_ngcontent-%COMP%]{text-align:center}.align-right[_ngcontent-%COMP%]{text-align:right}.size[_ngcontent-%COMP%]{width:-webkit-fill-available;height:50px}.icon-size[_ngcontent-%COMP%]{font-size:20px}.padding-top[_ngcontent-%COMP%]{padding-top:10px}.padding-left[_ngcontent-%COMP%]{padding-left:30px}"]}),h),k=[{path:"",component:(v=function(){function c(){e(this,c)}return o(c,[{key:"ngOnInit",value:function(){}}]),c}(),v.\u0275fac=function(e){return new(e||v)},v.\u0275cmp=s.Qb({type:v,selectors:[["app-auth"]],decls:1,vars:0,template:function(e,c){1&e&&s.Xb(0,"router-outlet")},directives:[m.i],encapsulation:2}),v),children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:y},{path:"register",component:x}]}],M=((w=o(function c(){e(this,c)})).\u0275mod=s.Ub({type:w}),w.\u0275inj=s.Tb({factory:function(e){return new(e||w)},imports:[[i.c,n.h,n.p,m.h.forChild(k)]]}),w)}}])}();