(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{XBNL:function(t,e,c){"use strict";c.d(e,"a",function(){return r});var n=c("f8oD"),i=c("gQwx"),s=c("8Y7J");let r=(()=>{class t{constructor(t){this.http=t,this.attendanceUrl=i.a.mainApiUrl()+"/attendance"}getAttendance(t){return this.http.get(this.attendanceUrl+n.a.objToQuery(t))}createAttendance(t){return console.log("Create!"),console.log(t),console.log(this.attendanceUrl),this.http.post(this.attendanceUrl,t)}updateAttendance(t,e){return this.http.patch(this.attendanceUrl+"/"+t,e)}deleteAttendance(t){return this.http.delete(this.attendanceUrl+"/"+t)}}return t.\u0275fac=function(e){return new(e||t)(s.jc(n.a))},t.\u0275prov=s.Sb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},f4AX:function(t,e,c){"use strict";c.d(e,"a",function(){return r});var n=c("f8oD"),i=c("gQwx"),s=c("8Y7J");let r=(()=>{class t{constructor(t){this.http=t,this.userUrl=i.a.mainApiUrl()+"/user"}getUsers(t){return console.log(t),this.http.get(this.userUrl+n.a.objToQuery(t))}createUsers(t){return this.http.post(this.userUrl,t)}updateUsers(t,e){return this.http.patch(this.userUrl+"/"+t,e)}updateUser(t,e){return this.http.patch(this.userUrl+"/"+t,e)}deleteUsers(t){return this.http.delete(this.userUrl+"/"+t)}}return t.\u0275fac=function(e){return new(e||t)(s.jc(n.a))},t.\u0275prov=s.Sb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},h6ra:function(t,e,c){"use strict";c.r(e),c.d(e,"AttendenceModule",function(){return S});var n=c("SVse"),i=c("iInd"),s=c("w9WL"),r=c("LSHg"),o=c("RMBY"),a=c("8Y7J"),d=c("XBNL"),h=c("f4AX");function u(t,e){1&t&&(a.cc(0,"div",2),a.cc(1,"div",3),a.cc(2,"div",3),a.cc(3,"h4",12),a.Uc(4,"No Pending Attendance Found"),a.bc(),a.bc(),a.bc(),a.bc())}function f(t,e){if(1&t&&(a.cc(0,"div"),a.Uc(1),a.bc()),2&t){const t=a.oc().$implicit;a.Jb(1),a.Xc("",t.fName,"",t.lName," ")}}function l(t,e){if(1&t&&(a.cc(0,"div"),a.Sc(1,f,2,2,"div",15),a.bc()),2&t){const t=e.$implicit,c=a.oc().$implicit;a.Jb(1),a.vc("ngIf",c.EmployeeId==t._id)}}function b(t,e){if(1&t&&(a.cc(0,"div"),a.Uc(1),a.bc()),2&t){const t=a.oc().$implicit;a.Jb(1),a.Wc("",t.designation," ")}}function p(t,e){if(1&t&&(a.cc(0,"div"),a.Sc(1,b,2,1,"div",15),a.bc()),2&t){const t=e.$implicit,c=a.oc().$implicit;a.Jb(1),a.vc("ngIf",c.EmployeeId==t._id)}}function v(t,e){1&t&&(a.cc(0,"td",12),a.Uc(1,"--"),a.bc())}function g(t,e){if(1&t&&(a.cc(0,"td",16),a.Uc(1),a.bc()),2&t){const t=a.oc().$implicit;a.Jb(1),a.Vc(t.inTime)}}function U(t,e){1&t&&(a.cc(0,"td",12),a.Uc(1,"--"),a.bc())}function m(t,e){if(1&t&&(a.cc(0,"td",16),a.Uc(1),a.bc()),2&t){const t=a.oc().$implicit;a.Jb(1),a.Vc(t.outTime)}}function y(t,e){1&t&&(a.cc(0,"td",12),a.Uc(1,"No location found"),a.bc())}function I(t,e){if(1&t&&(a.cc(0,"td",16),a.Uc(1),a.bc()),2&t){const t=a.oc().$implicit;a.Jb(1),a.Vc(t.location)}}function J(t,e){if(1&t&&(a.cc(0,"tr"),a.cc(1,"td"),a.Sc(2,l,2,1,"div",11),a.bc(),a.cc(3,"td"),a.Sc(4,p,2,1,"div",11),a.bc(),a.cc(5,"td"),a.Uc(6),a.bc(),a.cc(7,"td"),a.Uc(8),a.bc(),a.Sc(9,v,2,0,"td",13),a.Sc(10,g,2,1,"td",14),a.Sc(11,U,2,0,"td",13),a.Sc(12,m,2,1,"td",14),a.Sc(13,y,2,0,"td",13),a.Sc(14,I,2,1,"td",14),a.bc()),2&t){const t=e.$implicit,c=a.oc();a.Jb(2),a.vc("ngForOf",c.employees),a.Jb(2),a.vc("ngForOf",c.employees),a.Jb(2),a.Vc(t.status),a.Jb(2),a.Vc(t.date),a.Jb(1),a.vc("ngIf","Absent"==t.status),a.Jb(1),a.vc("ngIf","Present"==t.status),a.Jb(1),a.vc("ngIf","Absent"==t.status),a.Jb(1),a.vc("ngIf","Present"==t.status),a.Jb(1),a.vc("ngIf","Absent"==t.status),a.Jb(1),a.vc("ngIf","Present"==t.status)}}const w=[{path:"",component:(()=>{class t{constructor(t,e,c){this.attendanceService=t,this.datepipe=e,this.userService=c,this.dateToday=Date.now(),this.attendance=[],this.officeLeaves=[],this.countTheRecivedLeaves=0,this.officeNewLeaves=[],this.employeeId="62b08350191ff875b3a114ef",this.employees=[],this.users=[],this.userId=o.a.getLoggedUser().id}ngOnInit(){this.fetchCurentDate(),this.fetchAttendances(),this.fetchUsers()}refresh(){window.location.reload()}fetchCurentDate(){this.currentDateTime=this.datepipe.transform(new Date,"dd/MM/yyyy"),console.log(this.currentDateTime)}updateApproveStatus(t){this.attendanceService.updateAttendance(t,{isVerified:!0}).subscribe(t=>{this.refresh(),console.log("Attendance updated successfully")},t=>{})}fetchAttendances(){this.attendanceService.getAttendance({}).subscribe(t=>{this.attendance=t,this.fetchCurentDate();for(let e=0,c=0;e<this.attendance.length;e++)this.attendance[e].OfficeId==this.userId&&this.attendance[e].date==this.currentDateTime&&(this.officeLeaves[c]=this.attendance[e],this.countTheRecivedLeaves=this.officeLeaves.length,c++);this.officeNewLeaves=this.officeLeaves.reverse()})}fetchUsers(){this.userService.getUsers({}).subscribe(t=>{this.users=t;for(let e=0,c=0;e<this.users.length;e++)this.users[e].RoleId==this.employeeId&&(this.employees[c]=this.users[e],c++);console.log(this.employees)})}}return t.\u0275fac=function(e){return new(e||t)(a.Wb(d.a),a.Wb(n.e),a.Wb(h.a))},t.\u0275cmp=a.Qb({type:t,selectors:[["app-attendence"]],decls:27,vars:2,consts:[[1,"row"],[1,"col-md-12","grid-margin","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title",2,"color","#727cf5"],["class","card",4,"ngIf"],[1,"table-responsive","pt-3"],[1,"table","table-bordered"],[2,"background-color","rgb(194, 216, 250)"],[1,"text-center"],[1,"text-center",2,"background-color","azure"],[4,"ngFor","ngForOf"],[2,"color","red"],["style","color: red",4,"ngIf"],["style","color: green",4,"ngIf"],[4,"ngIf"],[2,"color","green"]],template:function(t,e){1&t&&(a.cc(0,"div",0),a.cc(1,"div",1),a.cc(2,"div",2),a.cc(3,"div",3),a.cc(4,"h6",4),a.Uc(5,"Attendance Verification List"),a.bc(),a.Sc(6,u,5,0,"div",5),a.cc(7,"div",6),a.cc(8,"table",7),a.cc(9,"thead",8),a.cc(10,"tr",9),a.cc(11,"th"),a.Uc(12,"Employee Name"),a.bc(),a.cc(13,"th"),a.Uc(14,"Designation"),a.bc(),a.cc(15,"th"),a.Uc(16,"Status"),a.bc(),a.cc(17,"th"),a.Uc(18,"Date"),a.bc(),a.cc(19,"th"),a.Uc(20,"In Time"),a.bc(),a.cc(21,"th"),a.Uc(22,"Out Time"),a.bc(),a.cc(23,"th"),a.Uc(24,"Location"),a.bc(),a.bc(),a.bc(),a.cc(25,"tbody",10),a.Sc(26,J,15,10,"tr",11),a.bc(),a.bc(),a.bc(),a.bc(),a.bc(),a.bc(),a.bc()),2&t&&(a.Jb(6),a.vc("ngIf",0==e.countTheRecivedLeaves),a.Jb(20),a.vc("ngForOf",e.officeNewLeaves))},directives:[n.n,n.m],styles:[".color-blue[_ngcontent-%COMP%]{color:#7d98e8}td[_ngcontent-%COMP%]{word-wrap:break-word}"]}),t})()}];let S=(()=>{class t{}return t.\u0275mod=a.Ub({type:t}),t.\u0275inj=a.Tb({factory:function(e){return new(e||t)},providers:[n.e],imports:[[n.c,i.i.forChild(w),s.a,r.a.forRoot({apiKey:"AIzaSyAP8n5GbRjUqB9dQfxDfZLJuFam4PjHOTs"})]]}),t})()}}]);