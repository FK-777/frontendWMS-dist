(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"+6Cr":function(e,t,c){"use strict";c.r(t),c.d(t,"LeaveHistroyModule",function(){return J});var n=c("SVse"),o=c("iInd"),i=c("w9WL"),a=c("LSHg"),s=c("s7LF"),r=c("8Y7J"),l=c("hccJ"),b=c("f4AX"),d=c("xkgV");let p=(()=>{class e{transform(e,t,c){return t.forEach((t,n)=>{t&&(e=e.filter(e=>-1!==e[c[n]].toString().toLowerCase().indexOf(t.toString().toLowerCase())))}),e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.Vb({name:"one",type:e,pure:!0}),e})();function f(e,t){if(1&e){const e=r.dc();r.cc(0,"div",17),r.cc(1,"form",18),r.cc(2,"div",19),r.cc(3,"select",20),r.cc(4,"option",21),r.Uc(5,"Select Status"),r.bc(),r.cc(6,"option",22),r.Uc(7,"Pending"),r.bc(),r.cc(8,"option",23),r.Uc(9,"Approved"),r.bc(),r.cc(10,"option",24),r.Uc(11,"Declined"),r.bc(),r.bc(),r.bc(),r.cc(12,"div",19),r.cc(13,"select",25),r.cc(14,"option",21),r.Uc(15,"Select Type"),r.bc(),r.cc(16,"option",26),r.Uc(17,"Medical"),r.bc(),r.cc(18,"option",27),r.Uc(19,"Casual"),r.bc(),r.cc(20,"option",28),r.Uc(21,"Privilege"),r.bc(),r.cc(22,"option",29),r.Uc(23,"Compensatory Off"),r.bc(),r.bc(),r.bc(),r.cc(24,"div",19),r.cc(25,"input",30),r.mc("ngModelChange",function(t){return r.Kc(e),r.oc().changed=t}),r.bc(),r.bc(),r.cc(26,"div",19),r.cc(27,"input",30),r.mc("ngModelChange",function(t){return r.Kc(e),r.oc().change=t}),r.bc(),r.bc(),r.cc(28,"div",19),r.cc(29,"button",31),r.Xb(30,"i",32),r.bc(),r.cc(31,"button",33),r.Xb(32,"i",34),r.bc(),r.bc(),r.bc(),r.bc()}if(2&e){const e=r.oc();r.Jb(3),r.vc("formControl",e.myStatus),r.Jb(10),r.vc("formControl",e.leaveType),r.Jb(12),r.vc("ngModel",e.changed)("formControl",e.myDate),r.Jb(2),r.vc("ngModel",e.change)("formControl",e.myEndDate)}}function g(e,t){if(1&e&&(r.cc(0,"div"),r.Uc(1),r.bc()),2&e){const e=r.oc().$implicit;r.Jb(1),r.Xc("",e.fName," ",e.lName,"")}}function u(e,t){if(1&e&&(r.cc(0,"div"),r.Sc(1,g,2,2,"div",37),r.bc()),2&e){const e=t.$implicit,c=r.oc().$implicit;r.Jb(1),r.vc("ngIf",c.EmployeeId==e._id)}}function h(e,t){if(1&e&&(r.cc(0,"div"),r.Uc(1),r.bc()),2&e){const e=r.oc().$implicit;r.Jb(1),r.Vc(e.designation)}}function v(e,t){if(1&e&&(r.cc(0,"div"),r.Sc(1,h,2,1,"div",37),r.bc()),2&e){const e=t.$implicit,c=r.oc().$implicit;r.Jb(1),r.vc("ngIf",c.EmployeeId==e._id)}}function m(e,t){if(1&e&&(r.cc(0,"div"),r.Uc(1),r.bc()),2&e){const e=r.oc().$implicit;r.Jb(1),r.Wc("",e.officeName," ")}}function C(e,t){if(1&e&&(r.cc(0,"div"),r.Sc(1,m,2,1,"div",37),r.bc()),2&e){const e=t.$implicit,c=r.oc().$implicit;r.Jb(1),r.vc("ngIf",c.OfficeId==e._id)}}function O(e,t){if(1&e&&(r.cc(0,"td"),r.cc(1,"span",38),r.Uc(2),r.bc(),r.bc()),2&e){const e=r.oc().$implicit;r.Jb(2),r.Vc(e.status)}}function y(e,t){if(1&e&&(r.cc(0,"td"),r.cc(1,"span",39),r.Uc(2),r.bc(),r.bc()),2&e){const e=r.oc().$implicit;r.Jb(2),r.Vc(e.status)}}function P(e,t){if(1&e&&(r.cc(0,"td"),r.cc(1,"span",40),r.Uc(2),r.bc(),r.bc()),2&e){const e=r.oc().$implicit;r.Jb(2),r.Vc(e.status)}}function M(e,t){if(1&e&&(r.cc(0,"tr"),r.cc(1,"td"),r.Uc(2),r.bc(),r.cc(3,"td"),r.Sc(4,u,2,1,"div",14),r.bc(),r.cc(5,"td"),r.Sc(6,v,2,1,"div",14),r.bc(),r.cc(7,"td"),r.Sc(8,C,2,1,"div",14),r.bc(),r.cc(9,"td"),r.Uc(10),r.bc(),r.cc(11,"td",35),r.Uc(12),r.bc(),r.cc(13,"td",36),r.Uc(14),r.bc(),r.cc(15,"td"),r.Uc(16),r.bc(),r.Sc(17,O,3,1,"td",37),r.Sc(18,y,3,1,"td",37),r.Sc(19,P,3,1,"td",37),r.bc()),2&e){const e=t.$implicit,c=t.index,n=r.oc();r.Jb(2),r.Vc(c+1),r.Jb(2),r.vc("ngForOf",n.employees),r.Jb(2),r.vc("ngForOf",n.employees),r.Jb(2),r.vc("ngForOf",n.reqOffices),r.Jb(2),r.Vc(e.leaveType),r.Jb(2),r.Vc(e.startDate),r.Jb(2),r.Vc(e.endDate),r.Jb(2),r.Vc(e.reason),r.Jb(1),r.vc("ngIf","Pending"==e.status),r.Jb(1),r.vc("ngIf","Approved"==e.status),r.Jb(1),r.vc("ngIf","Declined"==e.status)}}const x=function(e,t,c,n){return[e,t,c,n]},_=function(){return["status","leaveType","startDate","endDate"]};let U=(()=>{class e{constructor(e,t){this.leaveService=e,this.userService=t,this.leaves=[],this.users=[],this.offices=[],this.reqOffices=[],this.appointmentTime=new Date,this.show=!1,this.officeLeaves=[],this.countTheRecivedLeaves=0,this.officeNewLeaves=[],this.employeeId="62b08350191ff875b3a114ef",this.officeRole="62b08350191ff875b3a114f0",this.employees=[],this.showFilters=!1,this.leaveType=new s.d(""),this.myStatus=new s.d(""),this.myDate=new s.d(""),this.myEndDate=new s.d("")}ngOnInit(){this.fetchUsers(),this.fetchLeaves(),this.fetchOffices()}fetchOffices(){this.userService.getUsers({}).subscribe(e=>{this.offices=e;for(let t=0,c=0;t<this.offices.length;t++)this.offices[t].RoleId==this.officeRole&&(this.reqOffices[c]=this.offices[t],this.officeCount=this.reqOffices.length,c++)})}fetchLeaves(){this.leaveService.getLeaves({}).subscribe(e=>{this.leaves=e;for(let t=0,c=0;t<this.leaves.length;t++)this.officeLeaves[c]=this.leaves[t],this.countTheRecivedLeaves=this.officeLeaves.length,c++,this.config={itemsPerPage:6,currentPage:1,totalItems:this.countTheRecivedLeaves};this.officeNewLeaves=this.officeLeaves.reverse()})}refresh(){window.location.reload()}pageChanged(e){this.config.currentPage=e}updateApproveStatus(e){this.leaveService.updateLeaves(e,{status:"Approved"}).subscribe(e=>{this.refresh(),console.log("Leaves updated successfully")},e=>{})}updateDeclineStatus(e){this.leaveService.updateLeaves(e,{status:"Declined"}).subscribe(e=>{this.refresh(),console.log("Leaves updated successfully")},e=>{})}fetchUsers(){this.userService.getUsers({}).subscribe(e=>{this.users=e;for(let t=0,c=0;t<this.users.length;t++)this.users[t].RoleId==this.employeeId&&(this.employees[c]=this.users[t],c++);console.log(this.employees)})}}return e.\u0275fac=function(t){return new(t||e)(r.Wb(l.a),r.Wb(b.a))},e.\u0275cmp=r.Qb({type:e,selectors:[["app-leave-histroy"]],decls:40,vars:15,consts:[[1,"card-title",2,"margin-bottom","-1%","font-weight","bold"],["type","button",1,"btn","btn-light","btn-icon",2,"float","right",3,"click"],[1,"feather","icon-filter"],[1,"row"],[1,"col-md-12","grid-margin","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title",2,"color","#727cf5"],[1,"container-fluid"],["class","filters card","style","margin-bottom: 9px; margin-top: 30px;",4,"ngIf"],[1,"table-responsive","pt-3"],[1,"table","table-bordered",2,"background-color","azure"],[2,"background-color","rgb(194, 216, 250)"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"pagination","mt-4"],[3,"pageChange"],[1,"filters","card",2,"margin-bottom","9px","margin-top","30px"],[1,"form-inline",2,"padding","9px","background-color","white"],[1,"form-group","ml-2"],["id","mySta",1,"form-control",3,"formControl"],["value",""],["value","Pending"],["value","Approved"],["value","Declined"],["id","leaveT",1,"form-control",3,"formControl"],["value","Medical"],["value","Casual"],["value","Privilege"],["value","Compensatory Off"],["type","date",1,"form-control",3,"ngModel","formControl","ngModelChange"],["type","button",1,"btn","btn-primary"],[1,"feather","icon-search"],["type","button",1,"btn","btn-light","ml-1"],[1,"feather","icon-refresh-ccw"],["value","lev.startDate"],["value","lev.endDate"],[4,"ngIf"],[1,"badge","badge-info-muted"],[1,"badge","badge-success"],[1,"badge","badge-danger"]],template:function(e,t){1&e&&(r.cc(0,"h4",0),r.cc(1,"button",1),r.mc("click",function(){return t.showFilters=!t.showFilters}),r.Xb(2,"i",2),r.Uc(3,"\xa0 "),r.bc(),r.bc(),r.cc(4,"div",3),r.cc(5,"div",4),r.cc(6,"div",5),r.cc(7,"div",6),r.cc(8,"h6",7),r.Uc(9,"Leave List"),r.bc(),r.cc(10,"div",8),r.Sc(11,f,33,6,"div",9),r.bc(),r.cc(12,"div",10),r.cc(13,"table",11),r.cc(14,"thead",12),r.cc(15,"tr",13),r.cc(16,"th"),r.Uc(17,"#"),r.bc(),r.cc(18,"th"),r.Uc(19,"Employee Name"),r.bc(),r.cc(20,"th"),r.Uc(21,"Designation"),r.bc(),r.cc(22,"th"),r.Uc(23,"Office"),r.bc(),r.cc(24,"th"),r.Uc(25,"Leave Type"),r.bc(),r.cc(26,"th"),r.Uc(27,"start Date"),r.bc(),r.cc(28,"th"),r.Uc(29,"End Date"),r.bc(),r.cc(30,"th"),r.Uc(31,"Reason"),r.bc(),r.cc(32,"th"),r.Uc(33,"Status"),r.bc(),r.bc(),r.bc(),r.cc(34,"tbody",13),r.Sc(35,M,20,11,"tr",14),r.pc(36,"paginate"),r.pc(37,"one"),r.bc(),r.bc(),r.cc(38,"div",15),r.cc(39,"pagination-controls",16),r.mc("pageChange",function(e){return t.pageChanged(e)}),r.bc(),r.bc(),r.bc(),r.bc(),r.bc(),r.bc(),r.bc()),2&e&&(r.Jb(11),r.vc("ngIf",t.showFilters),r.Jb(24),r.vc("ngForOf",r.rc(36,2,r.sc(37,5,t.officeLeaves,r.Cc(9,x,t.myStatus.value,t.leaveType.value,t.myDate.value,t.myEndDate.value),r.yc(14,_)),t.config)))},directives:[n.n,n.m,d.c,s.u,s.m,s.n,s.r,s.l,s.e,s.o,s.t,s.b],pipes:[d.b,p],styles:[".color-blue[_ngcontent-%COMP%]{color:#7d98e8}td[_ngcontent-%COMP%]{word-wrap:break-word}.website[_ngcontent-%COMP%]{letter-spacing:.5px;display:block;cursor:pointer;background-color:#313b3f;color:#fcdb42;padding:10px;text-decoration:none;text-align:right}#table-component[_ngcontent-%COMP%], .website[_ngcontent-%COMP%]{font:normal 14px sans-serif}#table-component[_ngcontent-%COMP%]{margin:15px auto 0;border:1px solid #000;border-radius:4px;height:400px;max-width:500px}#table-component[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{background-color:#313b3f;color:#fcdb42;padding:10px;margin:0}#table-component[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin-top:15px;width:100%;border-collapse:collapse}#table-component[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{padding-left:10px}#table-component[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:33.3%;font-size:13px}#table-component[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{font-size:14px}#table-component[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:1px solid #000;text-align:left;padding-bottom:5px}#table-component[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .pl-15[_ngcontent-%COMP%]{padding-left:15px}#table-component[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 0;border-bottom:1px solid #d3d3d3}#table-component[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{font-size:14px;text-align:center;margin:20px auto}#table-component[_ngcontent-%COMP%]     .pagination-next a, #table-component[_ngcontent-%COMP%]     .pagination-previous a{outline:none}#table-component[_ngcontent-%COMP%]     .ngx-pagination .current{border-radius:4px}#table-component[_ngcontent-%COMP%]     .ngx-pagination{padding:0!important}#table-component[_ngcontent-%COMP%]     .ngx-pagination a:hover, #table-component[_ngcontent-%COMP%]     .ngx-pagination button:hover{border-radius:4px}#table-component[_ngcontent-%COMP%]     .ngx-pagination a, #table-component[_ngcontent-%COMP%]     .ngx-pagination button{border-radius:4px;outline:none}@media screen and (max-width:520px){#table-component[_ngcontent-%COMP%]{margin:15px}}"]}),e})();var w=c("KeVr");const S=[{path:"",component:U}];let J=(()=>{class e{}return e.\u0275mod=r.Ub({type:e}),e.\u0275inj=r.Tb({factory:function(t){return new(t||e)},providers:[n.e],imports:[[n.c,o.i.forChild(S),s.i,s.q,i.a,d.a,w.a,a.a.forRoot({apiKey:"AIzaSyAP8n5GbRjUqB9dQfxDfZLJuFam4PjHOTs"})]]}),e})()},hccJ:function(e,t,c){"use strict";c.d(t,"a",function(){return a});var n=c("f8oD"),o=c("gQwx"),i=c("8Y7J");let a=(()=>{class e{constructor(e){this.http=e,this.leaveUrl=o.a.mainApiUrl()+"/leave"}getLeaves(e){return this.http.get(this.leaveUrl+n.a.objToQuery(e))}createLeaves(e){return console.log("Create!"),console.log(e),console.log(this.leaveUrl),this.http.post(this.leaveUrl,e)}updateLeaves(e,t){return this.http.patch(this.leaveUrl+"/"+e,t)}deleteLeaves(e){return this.http.delete(this.leaveUrl+"/"+e)}}return e.\u0275fac=function(t){return new(t||e)(i.jc(n.a))},e.\u0275prov=i.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);