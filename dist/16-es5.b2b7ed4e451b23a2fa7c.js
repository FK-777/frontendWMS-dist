!function(){function e(e,c){if(!(e instanceof c))throw new TypeError("Cannot call a class as a function")}function c(e,c){for(var t=0;t<c.length;t++){var n=c[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{W26d:function(c,n,i){"use strict";i.r(n),i.d(n,"LeaveModule",function(){return D});var o,r,a=i("SVse"),s=i("iInd"),l=i("s7LF"),u=i("tyVc"),f=i("8Y7J"),b=((r=function(){function c(){e(this,c)}return t(c,[{key:"ngOnInit",value:function(){}}]),c}()).\u0275fac=function(e){return new(e||r)},r.\u0275cmp=f.Qb({type:r,selectors:[["app-leave"]],decls:1,vars:0,template:function(e,c){1&e&&f.Xb(0,"router-outlet")},directives:[s.j],encapsulation:2}),r),d=((o=function(){function c(){e(this,c)}return t(c,[{key:"ngOnInit",value:function(){}},{key:"openFileBrowser",value:function(e){e.preventDefault(),document.querySelector("#fileUploadInputExample").click()}},{key:"handleFileInput",value:function(e){e.target.files.length&&document.querySelector("#fileUploadInputExample + .input-group .file-upload-info").setAttribute("value",e.target.files[0].name)}}]),c}()).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=f.Qb({type:o,selectors:[["app-apply-leave"]],decls:52,vars:0,consts:[[1,"card-title","color-blue"],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","grid-margin","stretch-card"],[1,"card"],[1,"card-body"],[1,"forms-sample"],[1,"col-sm-4"],[1,"form-group"],["for","exampleInputUsername1"],[1,"form-control","form-control-sm","mb-3","ulineform"],["selected",""],["value","Casual Leave"],["value","Medical Leave"],["type","date","placeholder","Date",1,"form-control","ulineform"],["for","exampleInputEmail1"],["id","exampleFormControlTextarea1","rows","5","placeholder","Spacify Reason",1,"form-control","ulineform"],[1,"form-check","form-check-flat","form-check-primary"],[1,"form-check-label"],["type","checkbox",1,"form-check-input"],[1,"input-frame"],["type","submit",1,"btn","btn-primary","mr-2"],[1,"btn","btn-light"]],template:function(e,c){1&e&&(f.cc(0,"h3",0),f.Uc(1,"Apply Leave"),f.bc(),f.cc(2,"nav",1),f.cc(3,"ol",2),f.cc(4,"li",3),f.cc(5,"a",4),f.Uc(6,"Dashboard"),f.bc(),f.bc(),f.cc(7,"li",3),f.cc(8,"a",4),f.Uc(9,"Leave"),f.bc(),f.bc(),f.cc(10,"li",5),f.Uc(11,"Apply Leave"),f.bc(),f.bc(),f.bc(),f.cc(12,"div",6),f.cc(13,"div",7),f.cc(14,"div",8),f.cc(15,"div",9),f.cc(16,"form",10),f.cc(17,"div",6),f.cc(18,"div",11),f.cc(19,"div",12),f.cc(20,"label",13),f.Uc(21,"Leave Type"),f.bc(),f.cc(22,"select",14),f.cc(23,"option",15),f.Uc(24,"Select"),f.bc(),f.cc(25,"option",16),f.Uc(26,"Casual Leave"),f.bc(),f.cc(27,"option",17),f.Uc(28,"Medical Leave"),f.bc(),f.bc(),f.bc(),f.bc(),f.cc(29,"div",11),f.cc(30,"div",12),f.cc(31,"label",13),f.Uc(32,"Start Date"),f.bc(),f.Xb(33,"input",18),f.bc(),f.bc(),f.cc(34,"div",11),f.cc(35,"div",12),f.cc(36,"label",13),f.Uc(37,"End Date"),f.bc(),f.Xb(38,"input",18),f.bc(),f.bc(),f.bc(),f.cc(39,"div",12),f.cc(40,"label",19),f.Uc(41,"Reason"),f.bc(),f.Xb(42,"textarea",20),f.bc(),f.cc(43,"div",21),f.cc(44,"label",22),f.Xb(45,"input",23),f.Xb(46,"i",24),f.Uc(47," Is it a Half Day? "),f.bc(),f.bc(),f.cc(48,"button",25),f.Uc(49,"Apply Leave"),f.bc(),f.cc(50,"button",26),f.Uc(51,"Cancel"),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.bc())},directives:[s.h,l.u,l.m,l.n,l.o,l.t],styles:['.back[_ngcontent-%COMP%]{background-color:#7d98e8}.text-color[_ngcontent-%COMP%]{color:#f0fff0}.color-blue[_ngcontent-%COMP%]{color:#7d98e8}.ulineform[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;border:none;border-bottom:1px solid #c2bba7}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:38px;height:18px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc}.slider[_ngcontent-%COMP%], .slider[_ngcontent-%COMP%]:before{position:absolute;transition:.4s}.slider[_ngcontent-%COMP%]:before{content:"";height:10px;width:10px;left:4px;bottom:4px;background-color:#fff}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#2196f3}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #2196f3}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translateX(20px)}.slider.round[_ngcontent-%COMP%]{border-radius:34px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}']}),o),v=i("RMBY"),p=i("hccJ"),h=i("f4AX");function g(e,c){1&e&&(f.cc(0,"div",2),f.cc(1,"div",3),f.cc(2,"div",3),f.cc(3,"h4",7),f.Uc(4,"No Pending Leaves Found"),f.bc(),f.bc(),f.bc(),f.bc())}function m(e,c){if(1&e&&(f.cc(0,"div"),f.Uc(1),f.bc()),2&e){var t=f.oc().$implicit;f.Jb(1),f.Xc("",t.fName,"",t.lName," ")}}function y(e,c){if(1&e&&(f.cc(0,"div"),f.Sc(1,m,2,2,"div",14),f.bc()),2&e){var t=c.$implicit,n=f.oc().$implicit;f.Jb(1),f.vc("ngIf",n.EmployeeId==t._id)}}function U(e,c){if(1&e&&(f.cc(0,"div"),f.Uc(1),f.bc()),2&e){var t=f.oc().$implicit;f.Jb(1),f.Wc("",t.designation," ")}}function k(e,c){if(1&e&&(f.cc(0,"div"),f.Sc(1,U,2,1,"div",14),f.bc()),2&e){var t=c.$implicit,n=f.oc().$implicit;f.Jb(1),f.vc("ngIf",n.EmployeeId==t._id)}}function w(e,c){if(1&e&&(f.cc(0,"div"),f.Uc(1),f.bc()),2&e){var t=f.oc().$implicit;f.Jb(1),f.Wc("",t.designation," ")}}function I(e,c){if(1&e&&(f.cc(0,"div"),f.Sc(1,w,2,1,"div",14),f.bc()),2&e){var t=c.$implicit,n=f.oc().$implicit;f.Jb(1),f.vc("ngIf",n.EmployeeId==t._id)}}function L(e,c){if(1&e){var t=f.dc();f.cc(0,"button",19),f.mc("click",function(){f.Kc(t);var e=f.oc(4);return e.show=!e.show}),f.Xb(1,"i",20),f.Uc(2,"\xa0 "),f.bc()}}function O(e,c){if(1&e){var t=f.dc();f.cc(0,"button",21),f.mc("click",function(){f.Kc(t);var e=f.oc(2).$implicit;return f.oc(2).updateDeclineStatus(e._id)}),f.Xb(1,"i",22),f.Uc(2,"\xa0 "),f.bc()}}function S(e,c){if(1&e){var t=f.dc();f.cc(0,"button",23),f.mc("click",function(){f.Kc(t);var e=f.oc(2).$implicit;return f.oc(2).updateApproveStatus(e._id)}),f.Xb(1,"i",24),f.Uc(2,"\xa0 "),f.bc()}}function C(e,c){if(1&e&&(f.cc(0,"td",15),f.Sc(1,L,3,0,"button",16),f.Sc(2,O,3,0,"button",17),f.Sc(3,S,3,0,"button",18),f.bc()),2&e){var t=f.oc(3);f.Jb(1),f.vc("ngIf",!t.show),f.Jb(1),f.vc("ngIf",t.show),f.Jb(1),f.vc("ngIf",t.show)}}function x(e,c){if(1&e&&(f.cc(0,"tr"),f.cc(1,"td"),f.Sc(2,y,2,1,"div",12),f.bc(),f.cc(3,"td"),f.Sc(4,k,2,1,"div",12),f.bc(),f.cc(5,"td"),f.Uc(6),f.bc(),f.cc(7,"td"),f.Uc(8),f.pc(9,"date"),f.bc(),f.cc(10,"td"),f.Uc(11),f.pc(12,"date"),f.bc(),f.cc(13,"td"),f.Uc(14),f.bc(),f.cc(15,"td"),f.Sc(16,I,2,1,"div",12),f.bc(),f.Sc(17,C,4,3,"td",13),f.bc()),2&e){var t=c.$implicit,n=f.oc(2);f.Jb(2),f.vc("ngForOf",n.employees),f.Jb(2),f.vc("ngForOf",n.employees),f.Jb(2),f.Vc(t.leaveType),f.Jb(2),f.Vc(f.qc(9,8,t.startDate)),f.Jb(3),f.Vc(f.qc(12,10,t.endDate)),f.Jb(3),f.Vc(t.reason),f.Jb(2),f.vc("ngForOf",n.employees),f.Jb(1),f.vc("ngIf","Pending"==t.status)}}function J(e,c){if(1&e&&(f.cc(0,"div",8),f.cc(1,"table",9),f.cc(2,"thead",10),f.cc(3,"tr",11),f.cc(4,"th"),f.Uc(5,"Employee Name"),f.bc(),f.cc(6,"th"),f.Uc(7,"Designation"),f.bc(),f.cc(8,"th"),f.Uc(9,"Leave Type"),f.bc(),f.cc(10,"th"),f.Uc(11,"start Date"),f.bc(),f.cc(12,"th"),f.Uc(13,"End Date"),f.bc(),f.cc(14,"th"),f.Uc(15,"Reason"),f.bc(),f.cc(16,"th"),f.Uc(17,"Designation"),f.bc(),f.cc(18,"th"),f.Uc(19,"More"),f.bc(),f.bc(),f.bc(),f.cc(20,"tbody",11),f.Sc(21,x,18,12,"tr",12),f.bc(),f.bc(),f.bc()),2&e){var t=f.oc();f.Jb(21),f.vc("ngForOf",t.officeNewLeaves)}}var M,_,P=[{path:"",component:b,children:[{path:"",redirectTo:"basic-elements",pathMatch:"full"},{path:"apply-leave",component:d},{path:"leave-list",component:(M=function(){function c(t,n){e(this,c),this.leaveService=t,this.userService=n,this.leaves=[],this.users=[],this.offices=[],this.reqOffices=[],this.show=!1,this.officeLeaves=[],this.countTheRecivedLeaves=0,this.officeNewLeaves=[],this.employeeId="62b08350191ff875b3a114ef",this.officeRole="62b08350191ff875b3a114f0",this.employees=[],this.userId=v.a.getLoggedUser().id}return t(c,[{key:"ngOnInit",value:function(){this.fetchUsers(),this.fetchLeaves(),this.fetchOffices()}},{key:"fetchOffices",value:function(){var e=this;this.userService.getUsers({}).subscribe(function(c){e.offices=c;for(var t=0,n=0;t<e.offices.length;t++)e.offices[t].RoleId==e.officeRole&&(e.reqOffices[n]=e.offices[t],e.officeCount=e.reqOffices.length,n++)})}},{key:"fetchLeaves",value:function(){var e=this;this.leaveService.getLeaves({}).subscribe(function(c){e.leaves=c;for(var t=0,n=0;t<e.leaves.length;t++)e.leaves[t].OfficeId==e.userId&&"Pending"==e.leaves[t].status&&"lead"!=e.leaves[t].desigination&&(e.officeLeaves[n]=e.leaves[t],e.countTheRecivedLeaves=e.officeLeaves.length,n++);e.officeNewLeaves=e.officeLeaves.reverse()})}},{key:"refresh",value:function(){window.location.reload()}},{key:"updateApproveStatus",value:function(e){var c=this;this.leaveService.updateLeaves(e,{status:"Approved"}).subscribe(function(e){c.refresh(),console.log("Leaves updated successfully")},function(e){})}},{key:"updateDeclineStatus",value:function(e){var c=this;this.leaveService.updateLeaves(e,{status:"Declined"}).subscribe(function(e){c.refresh(),console.log("Leaves updated successfully")},function(e){})}},{key:"fetchUsers",value:function(){var e=this;this.userService.getUsers({}).subscribe(function(c){e.users=c;for(var t=0,n=0;t<e.users.length;t++)e.users[t].RoleId==e.employeeId&&e.users[t].OfficeId==e.userId&&(e.employees[n]=e.users[t],n++);console.log(e.employees)})}}]),c}(),M.\u0275fac=function(e){return new(e||M)(f.Wb(p.a),f.Wb(h.a))},M.\u0275cmp=f.Qb({type:M,selectors:[["app-leave-list"]],decls:8,vars:2,consts:[[1,"row"],[1,"col-md-12","grid-margin","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title",2,"color","#727cf5"],["class","card",4,"ngIf"],["class","table-responsive pt-3",4,"ngIf"],[2,"color","red"],[1,"table-responsive","pt-3"],[1,"table","table-bordered",2,"background-color","azure"],[2,"background-color","rgb(194, 216, 250)"],[1,"text-center"],[4,"ngFor","ngForOf"],["class","td-actions text-center",4,"ngIf"],[4,"ngIf"],[1,"td-actions","text-center"],["class","btn btn-light btn-icon",3,"click",4,"ngIf"],["class","btn btn-light btn-icon","style","background-color: red;",3,"click",4,"ngIf"],["class","btn btn-light btn-icon ml-2","style","background-color: rgb(115, 250, 115);",3,"click",4,"ngIf"],[1,"btn","btn-light","btn-icon",3,"click"],[1,"feather","icon-info"],[1,"btn","btn-light","btn-icon",2,"background-color","red",3,"click"],[1,"feather","icon-x"],[1,"btn","btn-light","btn-icon","ml-2",2,"background-color","rgb(115, 250, 115)",3,"click"],[1,"feather","icon-check"]],template:function(e,c){1&e&&(f.cc(0,"div",0),f.cc(1,"div",1),f.cc(2,"div",2),f.cc(3,"div",3),f.cc(4,"h6",4),f.Uc(5,"Received Leaves"),f.bc(),f.Sc(6,g,5,0,"div",5),f.Sc(7,J,22,1,"div",6),f.bc(),f.bc(),f.bc(),f.bc()),2&e&&(f.Jb(6),f.vc("ngIf",0==c.countTheRecivedLeaves),f.Jb(1),f.vc("ngIf",0!=c.countTheRecivedLeaves))},directives:[a.n,a.m],pipes:[a.e],styles:[".color-blue[_ngcontent-%COMP%]{color:#7d98e8}td[_ngcontent-%COMP%]{word-wrap:break-word}"]}),M)}]}],D=((_=t(function c(){e(this,c)})).\u0275mod=f.Ub({type:_}),_.\u0275inj=f.Tb({factory:function(e){return new(e||_)},imports:[[a.c,l.i,l.q,s.i.forChild(P),u.a]]}),_)},f4AX:function(c,n,i){"use strict";i.d(n,"a",function(){return s});var o=i("f8oD"),r=i("gQwx"),a=i("8Y7J"),s=function(){var c=function(){function c(t){e(this,c),this.http=t,this.userUrl=r.a.mainApiUrl()+"/user"}return t(c,[{key:"getUsers",value:function(e){return console.log(e),this.http.get(this.userUrl+o.a.objToQuery(e))}},{key:"createUsers",value:function(e){return this.http.post(this.userUrl,e)}},{key:"updateUsers",value:function(e,c){return this.http.patch(this.userUrl+"/"+e,c)}},{key:"updateUser",value:function(e,c){return this.http.patch(this.userUrl+"/"+e,c)}},{key:"deleteUsers",value:function(e){return this.http.delete(this.userUrl+"/"+e)}}]),c}();return c.\u0275fac=function(e){return new(e||c)(a.jc(o.a))},c.\u0275prov=a.Sb({token:c,factory:c.\u0275fac,providedIn:"root"}),c}()},hccJ:function(c,n,i){"use strict";i.d(n,"a",function(){return s});var o=i("f8oD"),r=i("gQwx"),a=i("8Y7J"),s=function(){var c=function(){function c(t){e(this,c),this.http=t,this.leaveUrl=r.a.mainApiUrl()+"/leave"}return t(c,[{key:"getLeaves",value:function(e){return this.http.get(this.leaveUrl+o.a.objToQuery(e))}},{key:"createLeaves",value:function(e){return console.log("Create!"),console.log(e),console.log(this.leaveUrl),this.http.post(this.leaveUrl,e)}},{key:"updateLeaves",value:function(e,c){return this.http.patch(this.leaveUrl+"/"+e,c)}},{key:"deleteLeaves",value:function(e){return this.http.delete(this.leaveUrl+"/"+e)}}]),c}();return c.\u0275fac=function(e){return new(e||c)(a.jc(o.a))},c.\u0275prov=a.Sb({token:c,factory:c.\u0275fac,providedIn:"root"}),c}()}}])}();