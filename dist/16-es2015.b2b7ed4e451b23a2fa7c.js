(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{W26d:function(c,e,t){"use strict";t.r(e),t.d(e,"LeaveModule",function(){return x});var i=t("SVse"),o=t("iInd"),n=t("s7LF"),s=t("tyVc"),r=t("8Y7J");let a=(()=>{class c{constructor(){}ngOnInit(){}}return c.\u0275fac=function(e){return new(e||c)},c.\u0275cmp=r.Qb({type:c,selectors:[["app-leave"]],decls:1,vars:0,template:function(c,e){1&c&&r.Xb(0,"router-outlet")},directives:[o.j],encapsulation:2}),c})(),l=(()=>{class c{constructor(){}ngOnInit(){}openFileBrowser(c){c.preventDefault(),document.querySelector("#fileUploadInputExample").click()}handleFileInput(c){c.target.files.length&&document.querySelector("#fileUploadInputExample + .input-group .file-upload-info").setAttribute("value",c.target.files[0].name)}}return c.\u0275fac=function(e){return new(e||c)},c.\u0275cmp=r.Qb({type:c,selectors:[["app-apply-leave"]],decls:52,vars:0,consts:[[1,"card-title","color-blue"],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","grid-margin","stretch-card"],[1,"card"],[1,"card-body"],[1,"forms-sample"],[1,"col-sm-4"],[1,"form-group"],["for","exampleInputUsername1"],[1,"form-control","form-control-sm","mb-3","ulineform"],["selected",""],["value","Casual Leave"],["value","Medical Leave"],["type","date","placeholder","Date",1,"form-control","ulineform"],["for","exampleInputEmail1"],["id","exampleFormControlTextarea1","rows","5","placeholder","Spacify Reason",1,"form-control","ulineform"],[1,"form-check","form-check-flat","form-check-primary"],[1,"form-check-label"],["type","checkbox",1,"form-check-input"],[1,"input-frame"],["type","submit",1,"btn","btn-primary","mr-2"],[1,"btn","btn-light"]],template:function(c,e){1&c&&(r.cc(0,"h3",0),r.Uc(1,"Apply Leave"),r.bc(),r.cc(2,"nav",1),r.cc(3,"ol",2),r.cc(4,"li",3),r.cc(5,"a",4),r.Uc(6,"Dashboard"),r.bc(),r.bc(),r.cc(7,"li",3),r.cc(8,"a",4),r.Uc(9,"Leave"),r.bc(),r.bc(),r.cc(10,"li",5),r.Uc(11,"Apply Leave"),r.bc(),r.bc(),r.bc(),r.cc(12,"div",6),r.cc(13,"div",7),r.cc(14,"div",8),r.cc(15,"div",9),r.cc(16,"form",10),r.cc(17,"div",6),r.cc(18,"div",11),r.cc(19,"div",12),r.cc(20,"label",13),r.Uc(21,"Leave Type"),r.bc(),r.cc(22,"select",14),r.cc(23,"option",15),r.Uc(24,"Select"),r.bc(),r.cc(25,"option",16),r.Uc(26,"Casual Leave"),r.bc(),r.cc(27,"option",17),r.Uc(28,"Medical Leave"),r.bc(),r.bc(),r.bc(),r.bc(),r.cc(29,"div",11),r.cc(30,"div",12),r.cc(31,"label",13),r.Uc(32,"Start Date"),r.bc(),r.Xb(33,"input",18),r.bc(),r.bc(),r.cc(34,"div",11),r.cc(35,"div",12),r.cc(36,"label",13),r.Uc(37,"End Date"),r.bc(),r.Xb(38,"input",18),r.bc(),r.bc(),r.bc(),r.cc(39,"div",12),r.cc(40,"label",19),r.Uc(41,"Reason"),r.bc(),r.Xb(42,"textarea",20),r.bc(),r.cc(43,"div",21),r.cc(44,"label",22),r.Xb(45,"input",23),r.Xb(46,"i",24),r.Uc(47," Is it a Half Day? "),r.bc(),r.bc(),r.cc(48,"button",25),r.Uc(49,"Apply Leave"),r.bc(),r.cc(50,"button",26),r.Uc(51,"Cancel"),r.bc(),r.bc(),r.bc(),r.bc(),r.bc(),r.bc())},directives:[o.h,n.u,n.m,n.n,n.o,n.t],styles:['.back[_ngcontent-%COMP%]{background-color:#7d98e8}.text-color[_ngcontent-%COMP%]{color:#f0fff0}.color-blue[_ngcontent-%COMP%]{color:#7d98e8}.ulineform[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;border:none;border-bottom:1px solid #c2bba7}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:38px;height:18px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc}.slider[_ngcontent-%COMP%], .slider[_ngcontent-%COMP%]:before{position:absolute;transition:.4s}.slider[_ngcontent-%COMP%]:before{content:"";height:10px;width:10px;left:4px;bottom:4px;background-color:#fff}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#2196f3}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #2196f3}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translateX(20px)}.slider.round[_ngcontent-%COMP%]{border-radius:34px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}']}),c})();var b=t("RMBY"),d=t("hccJ"),u=t("f4AX");function f(c,e){1&c&&(r.cc(0,"div",2),r.cc(1,"div",3),r.cc(2,"div",3),r.cc(3,"h4",7),r.Uc(4,"No Pending Leaves Found"),r.bc(),r.bc(),r.bc(),r.bc())}function h(c,e){if(1&c&&(r.cc(0,"div"),r.Uc(1),r.bc()),2&c){const c=r.oc().$implicit;r.Jb(1),r.Xc("",c.fName,"",c.lName," ")}}function p(c,e){if(1&c&&(r.cc(0,"div"),r.Sc(1,h,2,2,"div",14),r.bc()),2&c){const c=e.$implicit,t=r.oc().$implicit;r.Jb(1),r.vc("ngIf",t.EmployeeId==c._id)}}function v(c,e){if(1&c&&(r.cc(0,"div"),r.Uc(1),r.bc()),2&c){const c=r.oc().$implicit;r.Jb(1),r.Wc("",c.designation," ")}}function g(c,e){if(1&c&&(r.cc(0,"div"),r.Sc(1,v,2,1,"div",14),r.bc()),2&c){const c=e.$implicit,t=r.oc().$implicit;r.Jb(1),r.vc("ngIf",t.EmployeeId==c._id)}}function m(c,e){if(1&c&&(r.cc(0,"div"),r.Uc(1),r.bc()),2&c){const c=r.oc().$implicit;r.Jb(1),r.Wc("",c.designation," ")}}function U(c,e){if(1&c&&(r.cc(0,"div"),r.Sc(1,m,2,1,"div",14),r.bc()),2&c){const c=e.$implicit,t=r.oc().$implicit;r.Jb(1),r.vc("ngIf",t.EmployeeId==c._id)}}function y(c,e){if(1&c){const c=r.dc();r.cc(0,"button",19),r.mc("click",function(){r.Kc(c);const e=r.oc(4);return e.show=!e.show}),r.Xb(1,"i",20),r.Uc(2,"\xa0 "),r.bc()}}function I(c,e){if(1&c){const c=r.dc();r.cc(0,"button",21),r.mc("click",function(){r.Kc(c);const e=r.oc(2).$implicit;return r.oc(2).updateDeclineStatus(e._id)}),r.Xb(1,"i",22),r.Uc(2,"\xa0 "),r.bc()}}function w(c,e){if(1&c){const c=r.dc();r.cc(0,"button",23),r.mc("click",function(){r.Kc(c);const e=r.oc(2).$implicit;return r.oc(2).updateApproveStatus(e._id)}),r.Xb(1,"i",24),r.Uc(2,"\xa0 "),r.bc()}}function L(c,e){if(1&c&&(r.cc(0,"td",15),r.Sc(1,y,3,0,"button",16),r.Sc(2,I,3,0,"button",17),r.Sc(3,w,3,0,"button",18),r.bc()),2&c){const c=r.oc(3);r.Jb(1),r.vc("ngIf",!c.show),r.Jb(1),r.vc("ngIf",c.show),r.Jb(1),r.vc("ngIf",c.show)}}function k(c,e){if(1&c&&(r.cc(0,"tr"),r.cc(1,"td"),r.Sc(2,p,2,1,"div",12),r.bc(),r.cc(3,"td"),r.Sc(4,g,2,1,"div",12),r.bc(),r.cc(5,"td"),r.Uc(6),r.bc(),r.cc(7,"td"),r.Uc(8),r.pc(9,"date"),r.bc(),r.cc(10,"td"),r.Uc(11),r.pc(12,"date"),r.bc(),r.cc(13,"td"),r.Uc(14),r.bc(),r.cc(15,"td"),r.Sc(16,U,2,1,"div",12),r.bc(),r.Sc(17,L,4,3,"td",13),r.bc()),2&c){const c=e.$implicit,t=r.oc(2);r.Jb(2),r.vc("ngForOf",t.employees),r.Jb(2),r.vc("ngForOf",t.employees),r.Jb(2),r.Vc(c.leaveType),r.Jb(2),r.Vc(r.qc(9,8,c.startDate)),r.Jb(3),r.Vc(r.qc(12,10,c.endDate)),r.Jb(3),r.Vc(c.reason),r.Jb(2),r.vc("ngForOf",t.employees),r.Jb(1),r.vc("ngIf","Pending"==c.status)}}function O(c,e){if(1&c&&(r.cc(0,"div",8),r.cc(1,"table",9),r.cc(2,"thead",10),r.cc(3,"tr",11),r.cc(4,"th"),r.Uc(5,"Employee Name"),r.bc(),r.cc(6,"th"),r.Uc(7,"Designation"),r.bc(),r.cc(8,"th"),r.Uc(9,"Leave Type"),r.bc(),r.cc(10,"th"),r.Uc(11,"start Date"),r.bc(),r.cc(12,"th"),r.Uc(13,"End Date"),r.bc(),r.cc(14,"th"),r.Uc(15,"Reason"),r.bc(),r.cc(16,"th"),r.Uc(17,"Designation"),r.bc(),r.cc(18,"th"),r.Uc(19,"More"),r.bc(),r.bc(),r.bc(),r.cc(20,"tbody",11),r.Sc(21,k,18,12,"tr",12),r.bc(),r.bc(),r.bc()),2&c){const c=r.oc();r.Jb(21),r.vc("ngForOf",c.officeNewLeaves)}}const S=[{path:"",component:a,children:[{path:"",redirectTo:"basic-elements",pathMatch:"full"},{path:"apply-leave",component:l},{path:"leave-list",component:(()=>{class c{constructor(c,e){this.leaveService=c,this.userService=e,this.leaves=[],this.users=[],this.offices=[],this.reqOffices=[],this.show=!1,this.officeLeaves=[],this.countTheRecivedLeaves=0,this.officeNewLeaves=[],this.employeeId="62b08350191ff875b3a114ef",this.officeRole="62b08350191ff875b3a114f0",this.employees=[],this.userId=b.a.getLoggedUser().id}ngOnInit(){this.fetchUsers(),this.fetchLeaves(),this.fetchOffices()}fetchOffices(){this.userService.getUsers({}).subscribe(c=>{this.offices=c;for(let e=0,t=0;e<this.offices.length;e++)this.offices[e].RoleId==this.officeRole&&(this.reqOffices[t]=this.offices[e],this.officeCount=this.reqOffices.length,t++)})}fetchLeaves(){this.leaveService.getLeaves({}).subscribe(c=>{this.leaves=c;for(let e=0,t=0;e<this.leaves.length;e++)this.leaves[e].OfficeId==this.userId&&"Pending"==this.leaves[e].status&&"lead"!=this.leaves[e].desigination&&(this.officeLeaves[t]=this.leaves[e],this.countTheRecivedLeaves=this.officeLeaves.length,t++);this.officeNewLeaves=this.officeLeaves.reverse()})}refresh(){window.location.reload()}updateApproveStatus(c){this.leaveService.updateLeaves(c,{status:"Approved"}).subscribe(c=>{this.refresh(),console.log("Leaves updated successfully")},c=>{})}updateDeclineStatus(c){this.leaveService.updateLeaves(c,{status:"Declined"}).subscribe(c=>{this.refresh(),console.log("Leaves updated successfully")},c=>{})}fetchUsers(){this.userService.getUsers({}).subscribe(c=>{this.users=c;for(let e=0,t=0;e<this.users.length;e++)this.users[e].RoleId==this.employeeId&&this.users[e].OfficeId==this.userId&&(this.employees[t]=this.users[e],t++);console.log(this.employees)})}}return c.\u0275fac=function(e){return new(e||c)(r.Wb(d.a),r.Wb(u.a))},c.\u0275cmp=r.Qb({type:c,selectors:[["app-leave-list"]],decls:8,vars:2,consts:[[1,"row"],[1,"col-md-12","grid-margin","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title",2,"color","#727cf5"],["class","card",4,"ngIf"],["class","table-responsive pt-3",4,"ngIf"],[2,"color","red"],[1,"table-responsive","pt-3"],[1,"table","table-bordered",2,"background-color","azure"],[2,"background-color","rgb(194, 216, 250)"],[1,"text-center"],[4,"ngFor","ngForOf"],["class","td-actions text-center",4,"ngIf"],[4,"ngIf"],[1,"td-actions","text-center"],["class","btn btn-light btn-icon",3,"click",4,"ngIf"],["class","btn btn-light btn-icon","style","background-color: red;",3,"click",4,"ngIf"],["class","btn btn-light btn-icon ml-2","style","background-color: rgb(115, 250, 115);",3,"click",4,"ngIf"],[1,"btn","btn-light","btn-icon",3,"click"],[1,"feather","icon-info"],[1,"btn","btn-light","btn-icon",2,"background-color","red",3,"click"],[1,"feather","icon-x"],[1,"btn","btn-light","btn-icon","ml-2",2,"background-color","rgb(115, 250, 115)",3,"click"],[1,"feather","icon-check"]],template:function(c,e){1&c&&(r.cc(0,"div",0),r.cc(1,"div",1),r.cc(2,"div",2),r.cc(3,"div",3),r.cc(4,"h6",4),r.Uc(5,"Received Leaves"),r.bc(),r.Sc(6,f,5,0,"div",5),r.Sc(7,O,22,1,"div",6),r.bc(),r.bc(),r.bc(),r.bc()),2&c&&(r.Jb(6),r.vc("ngIf",0==e.countTheRecivedLeaves),r.Jb(1),r.vc("ngIf",0!=e.countTheRecivedLeaves))},directives:[i.n,i.m],pipes:[i.e],styles:[".color-blue[_ngcontent-%COMP%]{color:#7d98e8}td[_ngcontent-%COMP%]{word-wrap:break-word}"]}),c})()}]}];let x=(()=>{class c{}return c.\u0275mod=r.Ub({type:c}),c.\u0275inj=r.Tb({factory:function(e){return new(e||c)},imports:[[i.c,n.i,n.q,o.i.forChild(S),s.a]]}),c})()},f4AX:function(c,e,t){"use strict";t.d(e,"a",function(){return s});var i=t("f8oD"),o=t("gQwx"),n=t("8Y7J");let s=(()=>{class c{constructor(c){this.http=c,this.userUrl=o.a.mainApiUrl()+"/user"}getUsers(c){return console.log(c),this.http.get(this.userUrl+i.a.objToQuery(c))}createUsers(c){return this.http.post(this.userUrl,c)}updateUsers(c,e){return this.http.patch(this.userUrl+"/"+c,e)}updateUser(c,e){return this.http.patch(this.userUrl+"/"+c,e)}deleteUsers(c){return this.http.delete(this.userUrl+"/"+c)}}return c.\u0275fac=function(e){return new(e||c)(n.jc(i.a))},c.\u0275prov=n.Sb({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},hccJ:function(c,e,t){"use strict";t.d(e,"a",function(){return s});var i=t("f8oD"),o=t("gQwx"),n=t("8Y7J");let s=(()=>{class c{constructor(c){this.http=c,this.leaveUrl=o.a.mainApiUrl()+"/leave"}getLeaves(c){return this.http.get(this.leaveUrl+i.a.objToQuery(c))}createLeaves(c){return console.log("Create!"),console.log(c),console.log(this.leaveUrl),this.http.post(this.leaveUrl,c)}updateLeaves(c,e){return this.http.patch(this.leaveUrl+"/"+c,e)}deleteLeaves(c){return this.http.delete(this.leaveUrl+"/"+c)}}return c.\u0275fac=function(e){return new(e||c)(n.jc(i.a))},c.\u0275prov=n.Sb({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()}}]);