!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var c=0;c<e.length;c++){var n=e[c];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,c,n){return c&&e(t.prototype,c),n&&e(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{XBNL:function(e,n,o){"use strict";o.d(n,"a",function(){return l});var i=o("f8oD"),a=o("gQwx"),r=o("8Y7J"),l=function(){var e=function(){function e(c){t(this,e),this.http=c,this.attendanceUrl=a.a.mainApiUrl()+"/attendance"}return c(e,[{key:"getAttendance",value:function(t){return this.http.get(this.attendanceUrl+i.a.objToQuery(t))}},{key:"createAttendance",value:function(t){return console.log("Create!"),console.log(t),console.log(this.attendanceUrl),this.http.post(this.attendanceUrl,t)}},{key:"updateAttendance",value:function(t,e){return this.http.patch(this.attendanceUrl+"/"+t,e)}},{key:"deleteAttendance",value:function(t){return this.http.delete(this.attendanceUrl+"/"+t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.jc(i.a))},e.\u0275prov=r.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},aotM:function(e,n,o){"use strict";o.r(n),o.d(n,"AttendenceAdminAllModule",function(){return I});var i,a=o("SVse"),r=o("iInd"),l=o("w9WL"),d=o("s7LF"),s=o("RMBY"),f=o("8Y7J"),b=o("XBNL"),u=o("f4AX"),g=o("xkgV"),p=((i=function(){function e(){t(this,e)}return c(e,[{key:"transform",value:function(t,e,c){return e.forEach(function(e,n){e&&(t=t.filter(function(t){return-1!==t[c[n]].toString().toLowerCase().indexOf(e.toString().toLowerCase())}))}),t}}]),e}()).\u0275fac=function(t){return new(t||i)},i.\u0275pipe=f.Vb({name:"too",type:i,pure:!0}),i);function h(t,e){if(1&t){var c=f.dc();f.cc(0,"div",24),f.cc(1,"form",25),f.Xb(2,"div",26),f.Xb(3,"div",26),f.cc(4,"div",26),f.cc(5,"select",27),f.cc(6,"option",28),f.Uc(7,"Select Office"),f.bc(),f.cc(8,"option",29),f.Uc(9,"Gahkuch"),f.bc(),f.cc(10,"option",30),f.Uc(11,"Hunza"),f.bc(),f.cc(12,"option",31),f.Uc(13,"Chilas"),f.bc(),f.cc(14,"option",32),f.Uc(15,"GNWMC Juglote"),f.bc(),f.cc(16,"option",33),f.Uc(17,"Astore"),f.bc(),f.cc(18,"option",34),f.Uc(19,"GBWMC Nagar"),f.bc(),f.cc(20,"option",35),f.Uc(21,"Skardu"),f.bc(),f.cc(22,"option",36),f.Uc(23,"GBWMC Sost"),f.bc(),f.cc(24,"option",37),f.Uc(25,"GBWMC DANYORE"),f.bc(),f.cc(26,"option",38),f.Uc(27,"Gilgit"),f.bc(),f.cc(28,"option",39),f.Uc(29,"Head Office"),f.bc(),f.bc(),f.bc(),f.cc(30,"div",26),f.cc(31,"select",40),f.cc(32,"option",28),f.Uc(33,"Select Status"),f.bc(),f.cc(34,"option",41),f.Uc(35,"Present"),f.bc(),f.cc(36,"option",42),f.Uc(37,"Absent"),f.bc(),f.bc(),f.bc(),f.cc(38,"div",26),f.cc(39,"input",43),f.mc("change",function(t){return f.Kc(c),f.oc().SendDataonChange(t)})("ngModelChange",function(t){return f.Kc(c),f.oc().changed=t}),f.bc(),f.bc(),f.cc(40,"div",26),f.cc(41,"button",44),f.mc("click",function(){return f.Kc(c),f.oc().onClick()}),f.Xb(42,"i",45),f.bc(),f.cc(43,"button",46),f.Xb(44,"i",47),f.bc(),f.bc(),f.bc(),f.bc()}if(2&t){var n=f.oc();f.Jb(5),f.vc("formControl",n.officeName),f.Jb(26),f.vc("formControl",n.myStatus),f.Jb(8),f.vc("ngModel",n.changed)("formControl",n.myDate)}}function m(t,e){if(1&t&&(f.cc(0,"div"),f.Uc(1),f.bc()),2&t){var c=f.oc().$implicit;f.Jb(1),f.Xc("",c.fName," ",c.lName," ")}}function v(t,e){if(1&t&&(f.cc(0,"div"),f.Sc(1,m,2,2,"div",49),f.bc()),2&t){var c=e.$implicit,n=f.oc().$implicit;f.Jb(1),f.vc("ngIf",n.EmployeeId==c._id)}}function C(t,e){if(1&t&&(f.cc(0,"div"),f.Uc(1),f.bc()),2&t){var c=f.oc().$implicit;f.Jb(1),f.Wc("",c.designation," ")}}function M(t,e){if(1&t&&(f.cc(0,"div"),f.Sc(1,C,2,1,"div",49),f.bc()),2&t){var c=e.$implicit,n=f.oc().$implicit;f.Jb(1),f.vc("ngIf",n.EmployeeId==c._id)}}function O(t,e){if(1&t&&(f.cc(0,"div"),f.Uc(1),f.bc()),2&t){var c=f.oc().$implicit;f.Jb(1),f.Wc("",c.officeName," ")}}function y(t,e){if(1&t&&(f.cc(0,"div"),f.Sc(1,O,2,1,"div",49),f.bc()),2&t){var c=e.$implicit,n=f.oc().$implicit;f.Jb(1),f.vc("ngIf",n.OfficeId==c._id)}}function U(t,e){if(1&t&&(f.cc(0,"td"),f.cc(1,"span",50),f.Uc(2),f.bc(),f.bc()),2&t){var c=f.oc().$implicit;f.Jb(2),f.Vc(c.isVerified)}}function x(t,e){if(1&t&&(f.cc(0,"td"),f.cc(1,"span",51),f.Uc(2),f.bc(),f.bc()),2&t){var c=f.oc().$implicit;f.Jb(2),f.Vc(c.isVerified)}}function P(t,e){if(1&t&&(f.cc(0,"tr"),f.cc(1,"td"),f.Uc(2),f.bc(),f.cc(3,"td"),f.Sc(4,v,2,1,"div",21),f.bc(),f.cc(5,"td"),f.Sc(6,M,2,1,"div",21),f.bc(),f.cc(7,"td"),f.Sc(8,y,2,1,"div",21),f.bc(),f.cc(9,"td",48),f.Uc(10),f.bc(),f.cc(11,"td"),f.Uc(12),f.bc(),f.cc(13,"td"),f.Uc(14),f.bc(),f.cc(15,"td"),f.Uc(16),f.bc(),f.Sc(17,U,3,1,"td",49),f.Sc(18,x,3,1,"td",49),f.bc()),2&t){var c=e.$implicit,n=e.index,o=f.oc();f.Jb(2),f.Vc(n+1),f.Jb(2),f.vc("ngForOf",o.employees),f.Jb(2),f.vc("ngForOf",o.employees),f.Jb(2),f.vc("ngForOf",o.reqOffices),f.Jb(2),f.Vc(c.date),f.Jb(2),f.Vc(c.inTime),f.Jb(2),f.Vc(c.outTime),f.Jb(2),f.Vc(c.status),f.Jb(1),f.vc("ngIf",1==c.isVerified),f.Jb(1),f.vc("ngIf",0==c.isVerified)}}var w,_,k=function(t,e,c){return[t,e,c]},S=function(){return["office","status","date"]},J=((w=function(){function e(c,n,o){t(this,e),this.attendanceService=c,this.datepipe=n,this.userService=o,this.dateToday=Date.now(),this.attendance=[],this.pipe=new a.e("en-US"),this.offices=[],this.reqOffices=[],this.officeLeaves=[],this.countTheRecivedLeaves=0,this.officeNewLeaves=[],this.myVerification=new d.d(""),this.myStatus=new d.d(""),this.officeName=new d.d(""),this.myDate=new d.d(""),this.showFilters=!1,this.employeeId="62b08350191ff875b3a114ef",this.officeRole="62b08350191ff875b3a114f0",this.employees=[],this.users=[],this.userId=s.a.getLoggedUser().id}return c(e,[{key:"ngOnInit",value:function(){this.fetchCurentDate(),this.fetchAttendances(),this.fetchUsers(),this.fetchOffices()}},{key:"fetchOffices",value:function(){var t=this;this.userService.getUsers({}).subscribe(function(e){t.offices=e;for(var c=0,n=0;c<t.offices.length;c++)t.offices[c].RoleId==t.officeRole&&(t.reqOffices[n]=t.offices[c],t.officeCount=t.reqOffices.length,n++)})}},{key:"refresh",value:function(){window.location.reload()}},{key:"fetchCurentDate",value:function(){this.currentDateTime=this.datepipe.transform(new Date,"dd/MM/yyyy"),console.log(this.currentDateTime)}},{key:"updateApproveStatus",value:function(t){var e=this;this.attendanceService.updateAttendance(t,{isVerified:!0}).subscribe(function(t){e.refresh(),console.log("Attendance updated successfully")},function(t){})}},{key:"fetchAttendances",value:function(){var t=this;this.attendanceService.getAttendance({}).subscribe(function(e){t.attendance=e,t.fetchCurentDate();for(var c=0,n=0;c<t.attendance.length;c++)t.attendance[c].date==t.currentDateTime&&(t.officeLeaves[n]=t.attendance[c],t.countTheRecivedLeaves=t.officeLeaves.length,n++),t.config={itemsPerPage:5,currentPage:1,totalItems:t.countTheRecivedLeaves};t.officeNewLeaves=t.officeLeaves.reverse()})}},{key:"pageChanged",value:function(t){this.config.currentPage=t}},{key:"fetchUsers",value:function(){var t=this;this.userService.getUsers({}).subscribe(function(e){t.users=e;for(var c=0,n=0;c<t.users.length;c++)t.users[c].RoleId==t.employeeId&&(t.employees[n]=t.users[c],n++);console.log(t.employees)})}},{key:"changeFormat",value:function(t){var e=this.pipe.transform(this.changed,"dd/MM/YYYY");this.newDate=e}},{key:"onClick",value:function(){console.log("Im Direct Method called onClick"),this.changeFormat(this.changed),console.log("Im inDirect Method called onClick"),console.log(this.newDate)}},{key:"SendDataonChange",value:function(t){console.log("Im the target Method called onSendonChange"),console.log(t.target.value),this.onClick()}}]),e}()).\u0275fac=function(t){return new(t||w)(f.Wb(b.a),f.Wb(a.e),f.Wb(u.a))},w.\u0275cmp=f.Qb({type:w,selectors:[["app-attendence-admin-all"]],decls:54,vars:15,consts:[[1,"row"],[1,"col-md-12"],[1,"card-title","color-blue"],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"card-title",2,"margin-bottom","-1%","font-weight","bold"],["type","button",1,"btn","btn-light","btn-icon",2,"float","right",3,"click"],[1,"feather","icon-filter"],[1,"col-md-12","grid-margin","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title",2,"color","#727cf5"],[1,"table-responsive","pt-3"],[1,"container-fluid"],["class","filters card","style","margin-bottom: 9px; margin-top: 30px;",4,"ngIf"],[1,"table","table-bordered",2,"background-color","azure"],[2,"background-color","rgb(194, 216, 250)"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"pagination","mt-4"],[3,"pageChange"],[1,"filters","card",2,"margin-bottom","9px","margin-top","30px"],[1,"form-inline",2,"padding","9px","background-color","white"],[1,"form-group","ml-2"],["id","officeName",1,"form-control",3,"formControl"],["value",""],["value","Gahkuch"],["value","Hunza"],["value","Chilas"],["value","GNWMC Juglote"],["value","Astore"],["value","GBWMC Nagar"],["value","Skardu"],["value","GBWMC Sost"],["value","GBWMC DANYORE"],["value","Gilgit"],["value","Head Office"],["id","mySta",1,"form-control",3,"formControl"],["value","Present"],["value","Absent"],["type","date","id","myDate",1,"form-control",3,"ngModel","formControl","change","ngModelChange"],["type","button",1,"btn","btn-primary",3,"click"],[1,"feather","icon-search"],["type","button",1,"btn","btn-light","ml-1"],[1,"feather","icon-refresh-ccw"],["value","att.date"],[4,"ngIf"],[1,"badge","badge-success"],[1,"badge","badge-danger"]],template:function(t,e){1&t&&(f.cc(0,"div",0),f.cc(1,"div",1),f.cc(2,"h3",2),f.Uc(3,"All Attendance"),f.bc(),f.cc(4,"nav",3),f.cc(5,"ol",4),f.cc(6,"li",5),f.cc(7,"a",6),f.Uc(8,"Dashboard"),f.bc(),f.bc(),f.cc(9,"li",5),f.cc(10,"a",6),f.Uc(11,"History"),f.bc(),f.bc(),f.cc(12,"li",7),f.Uc(13,"All Attendance"),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.cc(14,"h4",8),f.cc(15,"button",9),f.mc("click",function(){return e.showFilters=!e.showFilters}),f.Xb(16,"i",10),f.Uc(17,"\xa0 "),f.bc(),f.bc(),f.cc(18,"div",0),f.cc(19,"div",11),f.cc(20,"div",12),f.cc(21,"div",13),f.cc(22,"h6",14),f.Uc(23),f.bc(),f.cc(24,"div",15),f.cc(25,"div",16),f.Sc(26,h,45,4,"div",17),f.bc(),f.cc(27,"table",18),f.cc(28,"thead",19),f.cc(29,"tr",20),f.cc(30,"th"),f.Uc(31,"#"),f.bc(),f.cc(32,"th"),f.Uc(33,"Employee Name"),f.bc(),f.cc(34,"th"),f.Uc(35,"Designation"),f.bc(),f.cc(36,"th"),f.Uc(37,"Office"),f.bc(),f.cc(38,"th"),f.Uc(39,"Date"),f.bc(),f.cc(40,"th"),f.Uc(41,"In Time"),f.bc(),f.cc(42,"th"),f.Uc(43,"Out Time"),f.bc(),f.cc(44,"th"),f.Uc(45,"Status"),f.bc(),f.cc(46,"th"),f.Uc(47,"Verification"),f.bc(),f.bc(),f.bc(),f.cc(48,"tbody",20),f.Sc(49,P,19,10,"tr",21),f.pc(50,"paginate"),f.pc(51,"too"),f.bc(),f.bc(),f.cc(52,"div",22),f.cc(53,"pagination-controls",23),f.mc("pageChange",function(t){return e.pageChanged(t)}),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.bc()),2&t&&(f.Jb(23),f.Vc(e.newDate),f.Jb(3),f.vc("ngIf",e.showFilters),f.Jb(23),f.vc("ngForOf",f.rc(50,3,f.sc(51,6,e.officeLeaves,f.Bc(10,k,e.officeName.value,e.myStatus.value,e.newDate),f.yc(14,S)),e.config)))},directives:[r.h,a.n,a.m,g.c,d.u,d.m,d.n,d.r,d.l,d.e,d.o,d.t,d.b],pipes:[g.b,p],styles:[".color-blue[_ngcontent-%COMP%]{color:#7d98e8}td[_ngcontent-%COMP%]{word-wrap:break-word}.website[_ngcontent-%COMP%]{letter-spacing:.5px;display:block;cursor:pointer;background-color:#313b3f;color:#fcdb42;padding:10px;text-decoration:none;text-align:right}#table-component[_ngcontent-%COMP%], .website[_ngcontent-%COMP%]{font:normal 14px sans-serif}#table-component[_ngcontent-%COMP%]{margin:15px auto 0;border:1px solid #000;border-radius:4px;height:400px;max-width:500px}#table-component[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{background-color:#313b3f;color:#fcdb42;padding:10px;margin:0}#table-component[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin-top:15px;width:100%;border-collapse:collapse}#table-component[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{padding-left:10px}#table-component[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:33.3%;font-size:13px}#table-component[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{font-size:14px}#table-component[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:1px solid #000;text-align:left;padding-bottom:5px}#table-component[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .pl-15[_ngcontent-%COMP%]{padding-left:15px}#table-component[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 0;border-bottom:1px solid #d3d3d3}#table-component[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{font-size:14px;text-align:center;margin:20px auto}#table-component[_ngcontent-%COMP%]     .pagination-next a, #table-component[_ngcontent-%COMP%]     .pagination-previous a{outline:none}#table-component[_ngcontent-%COMP%]     .ngx-pagination .current{border-radius:4px}#table-component[_ngcontent-%COMP%]     .ngx-pagination{padding:0!important}#table-component[_ngcontent-%COMP%]     .ngx-pagination a:hover, #table-component[_ngcontent-%COMP%]     .ngx-pagination button:hover{border-radius:4px}#table-component[_ngcontent-%COMP%]     .ngx-pagination a, #table-component[_ngcontent-%COMP%]     .ngx-pagination button{border-radius:4px;outline:none}@media screen and (max-width:520px){#table-component[_ngcontent-%COMP%]{margin:15px}}button[_ngcontent-%COMP%]{padding:10px;background-color:#4e7392;border:none;color:#fff;margin-top:10px}input[_ngcontent-%COMP%]{padding:5px;font-size:15px}"]}),w),A=o("KeVr"),D=[{path:"",component:J}],I=((_=c(function e(){t(this,e)})).\u0275mod=f.Ub({type:_}),_.\u0275inj=f.Tb({factory:function(t){return new(t||_)},providers:[a.e],imports:[[a.c,r.i.forChild(D),l.a,d.i,d.q,g.a,A.a]]}),_)}}])}();